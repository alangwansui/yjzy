<odoo>
    <data>


         <record id="view_transport_bill_tenyale_account_tree" model="ir.ui.view">
            <field name="name">transport.bill.tree</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <tree string="出运单" editable="bottom">
                    <field name="ref"/>
                    <field name="name" invisible="1" groups="base.group_system"/>
                    <field name="partner_id" required="1"/>
                    <field name="invoice_paid_state" invisible="1"/>
                    <field name="org_sale_amount" groups="base.group_system"/>
                    <field name="org_sale_amount_new"/>
                    <field name="purchase_cost_total"/>

                    <field name="sale_amount" groups="base.group_system" invisible="1"/>
                    <field name="ciq_amount" groups="base.group_system" invisible="1"/>
                    <field name="no_ciq_amount" groups="base.group_system" invisible="1"/>

                    <field name="state" invisible="1" groups="base.group_system"/>

                    <field name="company_currency_id" invisible="1" groups="base.group_system"/>
                    <field name="sale_currency_id" invisible="1"/>
                    <field name="third_currency_id" invisible="1" groups="base.group_system"/>
                    <field name="include_tax"/>
                    <field name="sale_invoice_total" string="应收金额" groups="base.group_system" sum="小计"/>
                    <field name="sale_invoice_total_new" string="应收金额" sum="小计"/>
                    <field name="sale_invoice_paid" string="已收金额" groups="base.group_system" sum="小计"/>
                    <field name="sale_invoice_paid_new" string="已收金额" sum="小计"/>
                    <field name="sale_invoice_balance" string="未收金额" groups="base.group_system" sum="小计"/>
                    <field name="sale_invoice_balance_new" string="未收金额" sum="小计"/>
                    <button name="open_sale_invoice_new" icon="fa-pencil-square-o"
                                                type="object"/>
                    <field name="purhcase_invoice_total" string="应付金额" groups="base.group_system" sum="小计"/>
                    <field name="purchase_invoice_total_new" string="应付金额" sum="小计"/>
                    <field name="purhcase_invoice_paid" string="已付金额" groups="base.group_system" sum="小计"/>
                    <field name="purchase_invoice_paid_new" string="已付金额" sum="小计"/>
                    <field name="purhcase_invoice_balance" string="未付金额" groups="base.group_system" sum="小计"/>
                    <field name="purchase_invoice_balance_new" string="未付金额" sum="小计"/>
                    <button name="open_purchase_invoice_new" icon="fa-pencil-square-o"
                                                type="object"/>

                    <field name="back_tax_invoice_total" string="退税金额" groups="base.group_system" sum="小计"/>
                    <field name="back_tax_invoice_total_new" string="退税金额" sum="小计"/>


                    <field name="back_tax_invoice_paid" string="已收退税" groups="base.group_system" sum="小计"/>
                    <field name="back_tax_invoice_paid_new" string="已收退税" sum="小计"/>
                    <field name="back_tax_invoice_balance" string="未收退税" groups="base.group_system" sum="小计"/>
                    <field name="back_tax_invoice_balance_new" string="未收退税" sum="小计"/>
                    <field name="date_out_in"/>
                    <field name="state_type" invisible="1"/>
                    <field name="create_date" invisible="1"/>
                    <field name="gongsi_id" string="销售主体" invisible="1"/>
                    <field name="purchase_gongsi_id" string="采购主体" invisible="1"/>


                </tree>
            </field>
        </record>
        <record id="view_transport_bill_tenyale_account_form" model="ir.ui.view">
            <field name="name">transport.bill.form</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <form string="出运单">
                    <header groups="base.group_system">

                        <button string="添加向导" states="draft" type="object" name="open_transport_self"
                                context="{'form_xml_id':'yjzy_extend.view_transport_bill_wkf_form','name':'向导开始'}"  class="oe_highlight"/>
                        <button string="添加销售合同" states="draft" type="object" invisible="1" name="open_wizard_transport4so"
                                class="oe_highlight"/>
                        <button string="添加销售明细" states="draft" type="object" name="open_wizard_transport4sol" confirm="重新添加销售明细，将会清除所有的清关和报关资料！是否继续"
                                groups="base.group_system"
                                class="oe_highlight"/>
                        <button string="调取剩余订单数量" invisible="0" type="object" name="make_default_lot_plan"
                                confirm="该命令将会初始化本次出运数量！是否继续？"
                                attrs="{'invisible': [('is_done_plan','=',True)]}" class="oe_highlight"/>
                        <button string="生成报关清关数据" name="make_all_document" confirm="该命令将会初始化清关资料，报关资料和供应商发货通知单！是否继续？"
                                class="oe_highlight"
                                type="object"/>
                        <button string="销售统计" name="make_sale_collect"
                                attrs="{'invisible': [('sale_collect_state','!=','draft')]}" class="oe_highlight"
                                type="object"/>
                        <button string="采购统计" name="make_purchase_collect"
                                attrs="{'invisible': [('purchase_collect_state','!=','draft')]}"
                                class="oe_highlight" type="object"/>
                        <!--button string="计算装箱数据" type="object" name="compute_pack_data" class="oe_highlight"/-->
                        <button string="计算清关数据" type="object" name="create_qingguan_lines"
                                attrs="{'invisible': [('qingguan_state','!=','draft')]}"
                                class="oe_highlight"/>
                        <button name="split_tuopan_weight" type="object" string="分配托盘重量"
                                attrs="{'invisible': [('is_done_tuopan','=',True)]}" class="oe_highlight"/>
                        <button string="返点统计" invisible="1" name="make_fandian_collect"
                                attrs="{'invisible': [('purchase_collect_state','=','draft')]}"
                                class="oe_highlight" type="object"/>
                        <button string="生成供应商发货单" type="object" name="make_tb_vendor"
                                attrs="{'invisible': [('is_done_tb_vendor','=',True)]}" class="oe_highlight"/>
                        <button string="确认" invisible="1" states="draft" type="object" name="action2w_sale_manager"
                                class="oe_highlight"/>
                        <button string="销售经理审批" invisible="1" states="w_sale_manager" type="object"
                                name="action2w_sale_director" class="oe_highlight"/>
                        <button string="销售总监审批" invisible="1" states="w_sale_director" type="object"
                                name="action2confirm" class="oe_highlight"/>
                        <button string="单证审批" invisible="1" states="confirmed" type="object" name="confirmed2locked"
                                class="oe_highlight"/>
                        <button string="完成" invisible="1" states="2locked" type="object" name="action_done"
                                class="oe_highlight"/>
                        <button name="compute_tb_ref" type="object" string="计算出运合同号" />
                        <button string="重置草稿" groups="base.group_system" invisible="1" type="object" name="action_draft"
                                states="cancel" class="oe_highlight"/>
                        <button string="取消" groups="base.group_system" invisible="1" type="object" name="action_cancel"
                                states="draft" class="oe_highlight"/>
                        <button string="出入库一次完成" invisible="1" states="confirmed" type="object" name="onece_all_stage"
                                class="oe_highlight"/>
                        <!--button string="计算利润" states="confirmed" type="object" name="compute_amount"
                                class="oe_highlight"/-->
                        <button string="销售发票" invisible="1" type="object" name="make_sale_invoice" class="oe_highlight"
                                attrs="{'invisible': [('sale_invoice_count','>', 0)]}"/>
                        <button string="采购发票" invisible="1" type="object" name="make_purchase_invoice"
                                class="oe_highlight"
                                attrs="{'invisible': [('purchase_invoice_count','>', 0)]}"/>
                        <button string="退税发票" invisible="1" type="object" name="make_back_tax_invoice"
                                class="oe_highlight"
                                attrs="{'invisible': [('back_tax_invoice_count','>', 0)]}"/>
                        <!--在出入库一次完成的时候，发票全部自动生成草稿状态，之后点发票过账，判断进仓日期，完成过账-->
                        <button string="发票过账" invisible="0" type="object" name="sync_data2invoice" class="oe_highlight"
                        />
                        <!--button string="计算明细批次" type="object" name="make_tbl_lot" class="oe_highlight"/-->

                        <!--button string="付款" type="object" name="open_account_payment" class="oe_highlight"/-->
                        <button string="打印供应商发货单" invisible="1" type="object" name="action_transport_bill_vendor_report"
                                class="oe_highlight"/>
                        <button string="打印成本单"  type="object" name="print_cost"
                                class="oe_highlight"/>

                        <button string="更新退税率" type="object" name="update_back_tax" class="oe_highlight"
                                groups="base.group_system"/>


                        <field name="state"  widget="statusbar" statusbar_visible=" "  groups="base.group_system"/>
                        <field name="is_editable" widget="boolean_toggle" groups="	sales_team.group_manager"/>
                    </header>


                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" type="object" string="清关资料"
                                    attrs="{'invisible':[('qg_count','=',0)]}"
                                    name="open_transport_bill_clearance"
                                    icon="fa-usd">
                                <field name="qg_count"/>
                            </button>
                            <button class="oe_stat_button" type="object" string="报关资料"
                                    attrs="{'invisible':[('bg_count','=',0)]}" name="open_transport_bill_declare"

                                    icon="fa-usd">
                                <field name="bg_count"/>
                            </button>
                            <button class="oe_stat_button" type="object" string="发货通知单" invisible="1"
                                    attrs="{'invisible':[('fhtzd_count','=',0)]}"
                                    name="open_transport_bill_delivery"
                                    icon="fa-usd">
                                <field name="fhtzd_count"/>
                            </button>
                             <button class="oe_stat_button" type="object" string="发货通知单"
                                    attrs="{'invisible':[('fhtzd_count','=',0)]}"
                                    name="open_transport_bill_supplier"
                                    icon="fa-usd">
                                <field name="fhtzd_count"/>
                            </button>

                            <button name="open_sale_invoice" type="object" class="oe_stat_button"
                                    attrs="{'invisible':[('sale_invoice_count','=',0)]}"
                                    icon="fa-pencil-square-o"
                                    string="应收账单">
                                <field name="sale_invoice_count"/>
                            </button>
                            <button name="open_purchase_invoice" type="object" class="oe_stat_button"
                                    attrs="{'invisible':[('purchase_invoice_count','=',0)]}"
                                    icon="fa-pencil-square-o"
                                    string="应付账单">
                                <field name="purchase_invoice_count"/>
                            </button>
                            <button name="open_back_tax_invoice" type="object" class="oe_stat_button"
                                    attrs="{'invisible':[('back_tax_invoice_count','=',0)]}"
                                    icon="fa-pencil-square-o"
                                    string="退税应收">
                                <field name="back_tax_invoice_count"/>
                            </button>
                        </div>
                        <group col="3">
                            <group name="general_information">
                                <field name="operation_wizard" invisible="0"/>


                                <field name="id" invisible="1"/>
                                <field name="ref" readonly="1"/>
                                <field name="name" readonly="1" groups="base.group_system" invisible="1"/>
                                <field name="partner_id" string="贸易客户" required="0" options="{'no_open':1}" readonly="1"

                                       no_create="True"/>

                                <field name="partner_shipping_id" string="最终目的地" options="{'no_open':1}" readonly="1"
                                       no_create="True"/>
                                <field name="date" readonly="1"/>
                                <field name="partner_invoice_id" domain="[('parent_id','child_of', partner_id)]"
                                       invisible="1"
                                       attrs="{'readonly': [('locked','=',True)]}" groups="base.group_system"/>
                                <label for="incoterm" string="价格条款" />
                                <div class="o_row">
                                    <span style="display:contents!important">
                                <field name="incoterm" string="价格条款" readonly="1"
                                       />
                               </span>
                                <button name="open_same" attrs="{'invisible':[('same_incoterm','=',True),('operation_wizard','in',['first','second'])]}" type="object" class="btn-xs btn-link mb4 fa fa-times-circle" icon="" style="color:red" context="{'default_open':'incoterm'}"/>
                                </div>
                                <field name="same_incoterm" invisible="1"/>
                                <label for="payment_term_id" string="付款条款"/>
                                <div class="o_row">
                                <field name="payment_term_id" options="{'no_open':1}" readonly="1"
                                       />
                                <button name="open_same" attrs="{'invisible':[('operation_wizard','in',['first','second']),('same_payment_term','=',True)]}" type="object" class="btn-xs btn-link mb4 fa fa-times-circle" icon="" style="color:red" context="{'default_open':'payment_term'}"/>
                                </div>
                                <field name="same_payment_term" invisible="1"/>
                                <field name="current_date_rate" />
                                <label for="sale_currency_id" string="交易货币"/>
                                 <div class="o_row">
                                <field name="sale_currency_id" readonly="1"/>
                                <button name="open_same" attrs="{'invisible':[('operation_wizard','in',['first','second']),('same_currency','=',True)]}" type="object" class="btn-xs btn-link mb4 fa fa-times-circle" icon="" style="color:red" context="{'default_open':'currency'}"/>
                                 </div>
                                 <field name="same_currency" invisible="1"/>
                                <label for="include_tax" string="含税" />
                                <div class="o_row" >
                                <field name="include_tax" readonly="1"
                                       />
                                 <button name="open_same" attrs="{'invisible':[('operation_wizard','in',['first','second']),('same_include_tax','=',True)]}" type="object" class="btn-xs btn-link mb4 fa fa-times-circle" icon="" style="color:red" context="{'default_open':'include_tax'}"/>
                                </div>
                                 <field name="same_include_tax" invisible="1"/>
                                <field name="locked" groups="base.group_system" invisible="1"/>
                                <field name="contract_type" groups="base.group_system"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="gongsi_id" options="{'no_open':1}" string="销售主体"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="purchase_gongsi_id" options="{'no_open':1}" string="采购主体"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                            </group>
                            <group>
                                <field name="sale_invoice_id"/>
                                <field name="sale_invoice_total_new"/>
                                <field name="sale_invoice_paid_new"/>
                                <field name="sale_invoice_balance_new"/>

                            </group>
                            <group invisible="1">
                                <button name="open_fee" type="object" string="计算取得销售合同费用预算" confirm="将会初始化费用金额" attrs="{'invisible':[('is_fee_done','=',True)]}" colspan="2"/>
                                <button name="open_fee" type="object" string="查看原始合同预算费用" attrs="{'invisible':[('is_fee_done','=',False)]}" colspan="2"/>

                                <field name="sale_currency_id" invisible="1"/>
                                <field name="fee_inner"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>


                                <field name="fee_rmb1"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>

                                <field name="fee_rmb1_note"
                                       attrs="{'readonly':[('state','not in',['draft','refused']),('is_editable','=',False)],'invisible':[('fee_rmb1','=',0)]}"/>
                                <field name="fee_rmb2"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="fee_rmb2_note"
                                       attrs="{'readonly':[('state','not in',['draft','refused']),('is_editable','=',False)],'invisible':[('fee_rmb2','=',0)]}"/>
                                <field name="fee_outer"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="outer_currency_id" invisible="1" readonly="1"/>
                                <field name="fee_export_insurance"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="export_insurance_currency_id" invisible="1" readonly="1"/>
                                <field name="fee_other"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="other_currency_id" readonly="1" invisible="1"/>
                                <field name="fee_other_note"
                                       attrs="{'readonly':[('state','not in',['draft','refused']),('is_editable','=',False)],'invisible':[('fee_other','=',0)]}"/>
                                <field name="fee_outer_need" string="运保费计入应收" readonly="1" invisible="1"/>
                            </group>
                            <group attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth'])]}">
                                <group invisible="1">
                                <button name="split_tuopan_weight" type="object" string="分配托盘重量"
                                attrs="{'invisible': [('is_done_tuopan','=',True)]}" class="oe_highlight"/>
                                <field name="pallet_type"
                                               attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)]}"/>
                                <field name="pallet_qty"
                                               attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)],
                                               'invisible':[('pallet_type','!=','plts')]}"/>
                                <field name="tuopan_weight" string="托盘总重"
                                               attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)],
                                               'invisible':[('pallet_type','!=','plts')]}"/>
                                <field name="tuopan_volume" string="托盘总体积"
                                               attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)],
                                               'invisible':[('pallet_type','!=','plts')]}"/>
                                <field name="sale_type" invisible="0"/>
                                </group>
                                <group>
                                <!-- name="account_type"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/-->
                                <field name="trans_type"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="cip_type"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"
                                       invisible="0"/>
                                <field name="credit_info" invisible="1"/>
                                <field name="insurance_info" invisible="1"/>
                                <field name="description" string="出运备注"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="gold_sample_state" readonly="1" string="金样管理"/>
                                <field name="hs_fill" groups="base.group_system"/>
                                <field name="create_date" string="创建日期" attrs="{'readonly': 1}" options="{'no_open':1}"
                                       widget="date"/>
                                <field name="user_id" readonly="1" no_create="True" string="责任人"
                                       options="{'no_open':1}"/>
                                <field name="sale_assistant_id" readonly="1" invisible="0" options="{'no_open':1}"/>
                                    </group>
                            </group>


                        </group>
                        <notebook>


                            <page string="明细" name="cymx" groups="sales_team.group_sale_assistant" attrs="{'invisible':[('operation_wizard','in',['first','second'])]}">
                               <group>
                                    <button name="finish_delivery_qty" string="出运数量确认完成" attrs="{'invisible':[('operation_wizard','in',['fourth'])]}" class="oe_highlight" type="object"/>
                                    <button name="finish_delivery_qty" string="重新修改出运数量"  invisible="1"/>
                                </group>
                                <field name="line_ids"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}">
                                    <tree create="false" editable="bottom">
                                        <button icon="fa-paper-plane" type="object" help="请点击，并初始化发货数量和金额等信息！"
                                                attrs="{'invisible':[('parent.state','not in',['draft']),('parent.is_editable','=',False)]}"
                                                name="make_default_lot_plan"/>
                                        <field name="sale_contract_code" string="销售合同"/>
                                        <field name="company_currency_id" invisible="1"/>
                                        <field name="sale_currency_id" invisible="1"/>
                                        <field name="third_currency_id" invisible="1"/>

                                        <field name="name" invisible="1"/>
                                        <field name="sol_id" invisible="1"/>

                                        <field name="so_id" groups="base.group_system" invisible="1"/>


                                        <field name="product_id" options="{'no_open':1}"/>
                                        <field name="hs_id" invisible="1"/>

                                        <field name="sale_qty" sum="小计" string="原始数量"/>
                                        <field name="qty_undelivered" invisible="1"/>
                                        <field name="rest_tb_qty" string="剩余数量"/>


                                        <field name="plan_qty" string="本次出运数量" sum="小计"/>
                                        <field name="so_tb_number" string="批次"/>
                                        <field name="lot_plan_id" invisible="1"/>

                                        <field name="smline_str" groups="base.group_system" invisible="1"/>
                                        <field name="smline_qty" groups="base.group_system" invisible="1"/>
                                        <field name="dlr_str" string="采购数" invisible="1"/>

                                        <field name="dlr_qty" groups="base.group_system" invisible="1"/>
                                        <field name="qty1stage" groups="base.group_system" invisible="1"/>
                                        <field name="qty2stage" sum="发货" invisible="1"/>
                                        <field name="org_currency_sale_amount" sum="销售" string="出运销售金额"/>
                                        <field name="sale_amount" sum="销售" groups="base.group_system" invisible="1"/>
                                        <field name="back_tax"/>
                                        <field name="purchase_cost" sum="采购" string="出运采购金额"/>
                                        <field name="stock_cost" sum="库存" groups="base.group_system" invisible="1"/>
                                        <field name="back_tax"/>

                                        <field name="vat_diff_amount" invisible="1"/>
                                        <field name="back_tax_amount" sum="退税"/>
                                        <field name="state" groups="base.group_system" invisible="1"/>
                                        <field name="plan_lot" readonly="1" string="采购合同号" context="{'show_po_code': 1}"
                                               options="{'no_open':1}"/>

                                        <field name="s_uom_id" groups="base.group_system" invisible="1"/>
                                        <field name="p_uom_id" groups="base.group_system" invisible="1"/>
                                        <field name="need_print" invisible="1"/>
                                        <field name="is_gold_sample"/>


                                        <button icon="fa-list" type="object" name="open_wizard_transport_lot_plan"
                                                attrs="{'invisible': [('state','!=', 'draft')]}" invisible="1"/>

                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="so_id"/>
                                            </group>
                                            <group>
                                                <field name="product_id"/>
                                            </group>
                                        </group>
                                        <notebook>
                                            <page string="安排的批次计划">
                                                <field name="id"/>
                                                <field name="lot_plan_ids">
                                                    <tree editable="bottom">
                                                        <field name="tbline_id" invisible="0"/>
                                                        <field name="lot_id"
                                                               domain="[('product_id', '=', parent.product_id)]"/>
                                                        <field name="qty"/>
                                                        <field name="stage_1"/>
                                                        <field name="stage_2"/>
                                                    </tree>
                                                </field>
                                            </page>
                                            <page string="调拨明细">
                                                <group>
                                                    <field name="stage1move_ids"/>
                                                    <field name="stage2move_ids"/>
                                                </group>

                                            </page>

                                        </notebook>


                                    </form>
                                </field>
                               <group class="oe_subtotal_footer oe_right">
                                <field name="back_tax_amount_org"/>
                                <field name="org_sale_amount_new" class="oe_subtotal_footer_separator"/>

                                <field name="purchase_cost_total" class="oe_subtotal_footer_separator" attrs="{'invisible': [('state', '=', 'draft')]}"/>

                            </group>

                            </page>

                            <page string="明细批次" attrs="{'readonly': [('locked','=',True)]}" name="pcmx" invisible="1"
                                  groups="base.group_system">
                                <field name="tbl_lot_ids">
                                    <tree string="明细批次">
                                        <field name="lot_id"/>
                                        <field name="qty"/>
                                        <field name="so_id"/>
                                        <field name="po_id"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="相关调拨" invisible="1">
                                <field name="picking_ids"/>
                            </page>
                            <page string="调拨" groups="base.group_system" name="db" invisible="1">
                                <group>
                                    <field name="stage1picking_ids" readonly="1"/>
                                    <field name="stage2picking_ids" readonly="1"/>
                                </group>
                            </page>
                            <page string="调拨明细" groups="base.group_system" name="dbmx" invisible="1">
                                <group>
                                    <field name="stage1move_ids" readonly="1"/>
                                    <field name="stage2move_ids" readonly="1"/>
                                </group>
                            </page>

                            <page string="订舱信息" name="dcxx" attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth','fifth'])]}">
                                <group>
                                    <group>
                                        <field name="production_sale_unit"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="invoice_title"/>
                                        <!--field name="mark_ids" widget="many2many_tags"/-->
                                        <field name="partner_mark_comb_ids" invisible="1"/>
                                        <field name="mark_text"/>
                                        <field name="mark_comb_id" invisible="1" domain="[('id', 'in', partner_mark_comb_ids)]"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"
                                               string="唛头"/>
                                        <field name="notice_man"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="delivery_man"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="wharf_src_id" options="{'no_open':1}"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="wharf_dest_id" options="{'no_open':1}"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="forwarder_name"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="settlement"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="notice"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="demand_info"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                    </group>
                                </group>

                            </page>

                            <page string="清关资料" name="qgzl" invisible="1" attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth','fifth'])]}">

                                <field name="qingguan_line_ids"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}">
                                    <tree editable="bottom">
                                        <field name="company_currency_id" invisible="1"/>
                                        <field name="sale_currency_id" invisible="1"/>
                                        <field name="third_currency_id" invisible="1"/>
                                        <field name="so_id" string="销售合同"/>
                                        <field name="product_id"/>
                                        <field name="source_area"/>
                                        <field name="source_country_id"/>
                                        <field name="uom_id" groups="base.group_system" invisible="1"/>
                                        <field name="s_uom_id" string="单位"/>
                                        <field name="price"/>
                                        <field name="qty" sum="小计"/>
                                        <field name="qty_package" sum="小计" groups="base.group_system" invisible="1"/>
                                        <field name="package_qty" sum="小计" string="箱数"/>
                                        <field name="net_weight" sum="小计"/>
                                        <field name="gross_weight" sum="小计"/>
                                        <field name="tuopan_weight" sum="小计" string="托重"/>
                                        <field name="shiji_weight" sum="小计"/>
                                        <field name="volume" sum="小计" string="体积"/>
                                        <field name="tuopan_volume" sum="小计" string="托体积"/>
                                        <field name="shiji_volume" sum="小计"/>
                                        <field name="sub_total" sum="小计"/>
                                    </tree>

                                </field>
                                <group>
                                    <field name="qingguan_description"
                                           attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)]}"/>
                                </group>
                            </page>
                            <page string="销售订单" groups="base.group_system" invisible="1">
                                <field name="so_ids"/>
                            </page>
                            <page string="采购订单" groups="base.group_system" invisible="1">
                                <field name="po_ids"/>
                            </page>
                            <page string="销售分解组合" groups="base.group_system" invisible="1">
                                <field name="comb_ids">
                                    <tree editable="bottom">
                                        <field name="product_id"/>
                                        <field name="hs_id"/>
                                        <field name="po_id"/>
                                        <field name="so_id"/>
                                        <field name="out_qty"/>
                                        <field name="price"/>
                                        <field name="amount"/>
                                        <field name="note"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="报关资料" invisible="1" attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth','fifth'])]}">
                                <header>
                                    <button name="action_sale_purchase" type="object" class="oe_highlight"
                                            string="报关Invoice资料"/>
                                    <button name="action_packaging" type="object" class="oe_highlight"
                                            string="装箱Packing list资料"/>
                                    <!--button name="action_others" type="object" string="其他信息" /-->
                                </header>
                                <field name="hsname_ids"
                                       attrs="{'readonly':[('state','not in',['draft','sales_approve']),('is_editable','=',False)]}">



                                    <tree editable="bottom" decoration-danger="purchase_hs_id==False">
                                        <field name="purchase_hs_id" string="采购对应" groups="base.group_system"/>
                                        <button name="make_suppliser_hs" type="object" icon="fa-plus-circle"
                                                attrs="{'invisible':[('purchase_hs_id','!=',False)]}"/>
                                        <field name="id" groups="base.group_system"/>
                                        <field name="package_tag" invisible="1"/>
                                        <field name="name" invisible="1"/>

                                        <field name="dump_product_id" groups="base.group_system" invisible="1"/>
                                        <field name="hs_id" attrs="{'required':[('purchase_hs_id','=',False)]}"/>
                                        <field name="hs_en_name" groups="base.group_system" invisible="1"/>
                                        <field name="out_qty2" sum="小计" string="报关数量"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)]}"/>
                                        <field name="po_id" string="采购合同"
                                               attrs="{'required':[('purchase_hs_id','=',False)],'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>

                                        <field name="amount" sum="小计" string="销售额"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)],'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>

                                        <field name="price2" string="单价" readonly="1"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="amount2" sum="小计" string="金额"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)],'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="purchase_amount2" sum="小计" string="采购额"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)],'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="back_tax" readonly="1"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="purchase_back_tax_amount2" sum="小计" string="退税额" readonly="1"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="out_qty" sum="小计" invisible="1"/>
                                        <field name="price" string="单价" invisible="1"/>


                                        <field name="purchase_amount" invisible="1"/>
                                        <field name="hs_id2" invisible="1"/>
                                        <field name="dump_product_id2" groups="base.group_system" invisible="1"/>


                                        <field name="source_area"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="source_country_id"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="qty_max" sum="小计" string="件数"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="qty_mid" groups="base.group_system" invisible="1"/>
                                        <field name="qty_min" groups="base.group_system" invisible="1"/>
                                        <field name="net_weight" sum="小计"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="gross_weight" sum="小计"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="tuopan_weight" string="托重"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="shiji_weight" sum="小计"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="volume" string="体积" sum="小计"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="tuopan_volume" string="托体积" sum="小计"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="shiji_volume" sum="小计"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="keyword"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="type" invisible="1"/>
                                        <field name="note" invisible="1"/>
                                        <button name="open_form_view" type="object" icon="fa-arrows-v"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="package_tag"/>
                                                <field name="name" readonly="0"/>
                                                <field name="dump_product_id" readonly="0"/>
                                                <field name="hs_id" readonly="0"/>
                                                <field name="hs_en_name" readonly="0"/>
                                                <field name="po_id"/>
                                                <field name="back_tax" readonly="1"/>
                                                <field name="out_qty" readonly="0"/>
                                                <field name="price"/>
                                                <field name="purchase_amount"/>
                                                <field name="purchase_amount2"/>
                                                <field name="amount"/>
                                                <field name="hs_id2"/>
                                                <field name="dump_product_id2"/>
                                                <field name="out_qty2"/>
                                                <field name="price2"/>
                                                <field name="amount2"/>
                                            </group>
                                            <group>
                                                <field name="source_area"/>
                                                <field name="source_country_id"/>
                                                <field name="qty_max"/>
                                                <field name="qty_mid" invisible="1"/>
                                                <field name="qty_min" readonly="1"/>
                                                <field name="net_weight"/>
                                                <field name="gross_weight"/>
                                                <field name="tuopan_weight"/>
                                                <field name="shiji_weight"/>
                                                <field name="volume"/>
                                                <field name="tuopan_volume"/>
                                                <field name="shiji_volume"/>
                                                <field name="type"/>
                                                <field name="note"/>
                                            </group>
                                        </group>
                                        <group>
                                            <field name="keyword"/>
                                        </group>
                                    </form>


                                </field>
                                <field name="description_baoguan"/>
                            </page>

                            <page string="采购明细" groups="base.group_system" invisible="1">
                                <field name="btl_supplier_ids">
                                    <tree editable="bottom">
                                        <field name="tbl_id"/>
                                        <field name="id" groups="base.group_system"/>
                                        <field name="product_id"/>
                                        <field name="lot_plan_id"/>
                                        <field name="lot_id"/>
                                        <field name="po_id"/>
                                        <field name="need_purchase_fandian"/>
                                        <field name="purchase_fandian_ratio"/>
                                        <field name="purchase_fandian_partner_id"/>

                                        <field name="supplier_id"/>
                                        <field name="qty" sum="Total"/>
                                        <field name="price"/>
                                        <field name="amount" sum="Total"/>
                                        <field name="tongji_type"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="采购BOM分解组合" groups="base.group_system" invisible="1">
                                <field name="btls_comb_ids">
                                    <tree editable="bottom">
                                        <field name="product_id"/>
                                        <field name="hs_id"/>
                                        <field name="qty" sum="Total"/>
                                        <field name="price"/>
                                        <field name="amount" sum="Total"/>
                                        <field name="supplier_id"/>
                                        <field name="po_id"/>
                                        <field name="tongji_type"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="报关采购统计" invisible="1">
                                <field name="btls_hs_ids"
                                       attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)]}">
                                    <tree editable="bottom">
                                        <field name="sale_hs_id" domain="[('tb_id','=', parent.id)]" string="销售统计"/>
                                        <field name="sale_hs_db_id"/>
                                        <field name="supplier_id"/>
                                        <field name="name"/>
                                        <field name="po_id"/>
                                        <field name="po_code" groups="base.group_system" invisible="1"/>
                                        <field name="hs_id"/>
                                        <field name="product_id" groups="base.group_system" invisible="1"/>
                                        <field name="qty" groups="base.group_system" invisible="1"/>
                                        <field name="price" groups="base.group_system" invisible="1"/>
                                        <field name="amount" groups="base.group_system" invisible="1"/>
                                        <field name="back_tax" groups="base.group_system"/>
                                        <field name="back_tax_amount" groups="base.group_system" invisible="1"/>
                                        <field name="hs_id2"/>
                                        <field name="product_id2" groups="base.group_system" invisible="1"/>
                                        <field name="qty2" groups="base.group_system" invisible="1"/>
                                        <field name="price2" groups="base.group_system" invisible="1"/>
                                        <field name="amount2"/>
                                        <field name="back_tax2"/>
                                        <field name="back_tax_amount2"/>
                                        <field name="tongji_type"/>
                                    </tree>
                                </field>
                            </page>
                            <!--page string="返点明细">
                                <field name="fandian_ids">
                                    <tree>
                                        <field name="supplier_id"/>
                                        <field name="partner_id"/>
                                        <field name="purchase_amout"/>
                                        <field name="fandian_amount"/>
                                    </tree>
                                </field>
                            </page-->
                            <page string="供应商发货通知" invisible="1" attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth','fifth'])]}">
                                <field name="tb_vendor_ids"/>
                            </page>
                            <page string="费用明细" invisible="1">
                                <field name="expense_ids">
                                </field>
                            </page>
                            <page string="统计">

                                <group col="3">
                                    <group name="sale_currency">
                                        <field name="is_done_plan"/>
                                        <field name="is_done_tuopan"/>
                                        <field name="is_done_tb_vendor"/>
                                        <field name="stage1state" invisible="1" groups="base.group_system"
                                               attrs="{'readonly': [('locked','=',True)]}"/>
                                        <field name="stage2state" invisible="1" groups="base.group_system"
                                               attrs="{'readonly': [('locked','=',True)]}"/>
                                        <field name="sale_collect_state"/>
                                        <field name="purchase_collect_state"/>
                                        <field name="qingguan_state"/>
                                        <field name="is_fee_done"/>
                                    </group>
                                    <group name="self_currency">

                                        <field name="company_id" readonly="1" invisible="1"/>
                                        <field name="company_currency_id" readonly="1" invisible="1"/>


                                        <field name="org_sale_amount" attrs="{'readonly': [('locked','=',True)]}"/>
                                        <field name="org_real_sale_amount" attrs="{'readonly': [('locked','=',True)]}"/>

                                        <field name="sale_commission_ratio"
                                               attrs="{'readonly': [('locked','=',True)]}"/>
                                        <field name="ciq_amount" attrs="{'readonly': [('locked','=',True)]}"/>
                                        <field name="no_ciq_amount" attrs="{'readonly': [('locked','=',True)]}"/>

                                        <field name="shoukuan_amount"/>
                                        <field name="fukuan_amount"/>

                                        <field name="budget_amount" invisible="1"/>
                                        <field name="budget_reset_amount" invisible="1"/>
                                    </group>
                                    <group groups="base.group_system">
                                        <field name="sale_currency_id" invisible="1"/>
                                        <field name="third_currency_id" no_create="True"/>
                                        <field name="sale_amount"/>
                                        <field name="real_sale_amount"/>
                                        <field name="sale_commission_amount"/>
                                        <field name="purchase_cost"/>
                                        <field name="fandian_amount"/>
                                        <field name="stock_cost"/>
                                        <field name="other_cost"/>
                                        <field name="back_tax_amount"/>
                                        <field name="vat_diff_amount"/>
                                        <field name="profit_amount"/>
                                        <field name="profit_ratio"/>



                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

         <record model="ir.actions.act_window" id="act_open_transport_bill_tenyale_invoice_view">
            <field name="name">应收应付数据查询</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">transport.bill</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="domain">[('state','=','invoiced')]</field>
            <field name="limit">20</field>
            <field name="search_view_id" ref="view_transport_bill_tenyale_filter"/>
            <field name="context">{'search_default_group_by_invoice_paid_state':1,'default_outer_currency_id':3,'default_export_insurance_currency_id':3,'default_other_currency_id':3,'show_po_code':1}</field>
            <field name="view_ids" eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('view_transport_bill_tenyale_account_tree')}),
                          (0, 0, {'view_mode': 'kanban', 'view_id': ref('view_transport_bill_tenyale_sales_kanban')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('view_transport_bill_tenyale_sales_form')})]"/>

        </record>

        <menuitem id="menu_transport_tenyale_invoice_bill" name="应收应付数据查询"
                  parent="yjzy_extend.menu_transport_tenyale_bill_root"
                  sequence="6"
                  action="act_open_transport_bill_tenyale_invoice_view"
        />


    </data>
</odoo>