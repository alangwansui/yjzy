<odoo>
    <data>
        <menuitem id="menu_transport_tenyale_bill_root"
                  name="出运:新"
                  sequence="22"
        />
        <record id="view_transport_bill_tenyale_filter" model="ir.ui.view">
            <field name="name">transport.bill.tenyale.select</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <search string="Transport Bill">

                    <field name="ref" string="模糊搜索"
                           filter_domain="['|','|',('ref','ilike',self),('name','ilike',self),('partner_id','child_of',self)]"/>
                    <field name="ref" string="合同号" filter_domain="['|',('ref','ilike',self),('name','ilike',self)]"/>
                    <field name="user_id"/>
                    <separator/>
                    <filter string="合同草稿" name="draft" domain="[('state','=','draft')]"/>
                    <filter string="审批中" name="approval"
                            domain="[('state','in',['submit','refused','sales_approve','locked','done'])]"/>
                    <filter string="合规审批完成" name="approve" domain="[('state','in',['approve'])]"/>
                    <filter string="单证审批完成" name="confirmed" domain="[('state','in',['confirmed'])]"/>
                    <separator/>
                    <filter string="出运完成" name="delivered" domain="[('state','in',['delivered'])]"/>
                    <filter string="应收付完成" name="invoiced" domain="[('state','in',['invoiced'])]"/>
                    <filter string="待货款收齐" name="done" domain="[('state','in',['done'])]"/>
                    <filter string="已收款" name="paid" domain="[('state','in',['paid'])]"/>
                    <separator/>

                    <group expand="0" string="Group By">
                        <filter string="核销执行时间以及核销类型分组" name="group_by_date_hexiao" domain="[]"
                                context="{'group_by':['hexiao_date','hexiao_type']}"/>
                        <filter string="出运确认时间分组" name="group_date_out_in" domain="[]"
                                context="{'group_by':['date_out_in:year','date_out_in']}"/>
                        <filter string="出运确认时间以及开票分组" name="group_date_out_in_add_purchase" domain="[]"
                                context="{'group_by':['date_out_in','stage_id']}"/>
                        <filter string="出运确认时间当层分组" name="group_date_out_in_1" domain="[]"
                                context="{'group_by':['date_out_in']}"/>
                        <filter string="出运确认按年分组" name="group_date_out_in_year" domain="[]"
                                context="{'group_by':['date_out_in:year']}"/>
                        <filter string="时间状态分组" name="group_date_all_state_1" domain="[]"
                                context="{'group_by':['date_all_state']}"/>
                        <filter string="状态和二级分组" name="group_by_state_type" domain="[]"
                                context="{'group_by':['stage_id','second_state']}"/>
                        <filter string="Stage分组" name="group_by_stage" domain="[]" context="{'group_by':['stage_id']}"/>
                        <filter string="应收付状态" name="group_by_invoice_paid_state" domain="[]"
                                context="{'group_by':['invoice_paid_state']}"/>
                        <filter string="状态" name="group_state" domain="[]" context="{'group_by':'stage_id'}"/>
                        <filter string="责任人" domain="[]" context="{'group_by':'user_id'}"/>
                        <filter name="customer" string="客户" domain="[]" context="{'group_by':'partner_id'}"/>
                        <separator/>
                        <filter string="审批完成月份" domain="[]" context="{'group_by':'approve_date'}"/>
                        <filter string="下单月份" domain="[]" context="{'group_by':'date_order'}"/>

                    </group>
                </search>
            </field>
        </record>


        <record id="view_transport_bill_tenyale_approving_tree" model="ir.ui.view">
            <field name="name">transport.bill.tree</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <tree string="未生效出运单" create="false">
                    <field name="current_date_rate" string="汇率"/>
                    <field name="ref"/>
                    <field name="name" invisible="1" groups="base.group_system"/>
                    <field name="partner_id" required="1"/>

                    <field name="org_sale_amount" groups="base.group_system"/>
                    <field name="org_sale_amount_new"/>
                    <field name="purchase_cost_total"/>


                    <field name="state" invisible="1" groups="base.group_system"/>

                    <field name="company_currency_id" invisible="1" groups="base.group_system"/>
                    <field name="sale_currency_id" invisible="1"/>
                    <field name="third_currency_id" invisible="1" groups="base.group_system"/>
                    <field name="include_tax"/>
                    <field name="state_type" invisible="1"/>
                    <field name="create_date"/>
                    <field name="gongsi_id" string="销售主体"/>
                    <field name="purchase_gongsi_id" string="采购主体"/>


                </tree>
            </field>
        </record>

        <record id="view_transport_bill_tenyale_sales_tree" model="ir.ui.view">
            <field name="name">transport.bill.tree</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <tree string="出运单" create="false" class="o_list_view_scroll" default_order="stage_id,approve_date desc">
                    <field name="current_date_rate" string="汇率"/>
                    <field name="ref"/>
                    <field name="name" invisible="1" groups="base.group_system"/>
                    <field name="approve_date" string="合规审批日"/>
                    <field name="date_out_in" string="出运日期"/>
                    <field name="partner_id" required="1"/>
                    <field name="invoice_paid_state" invisible="1"/>
                    <field name="org_sale_amount" groups="base.group_system"/>
                    <field name="org_real_sale_amount_new" sum="小计"/>
                    <field name="org_hsname_actual_amount" sum="小计"/>
                    <field name="sale_invoice_total_new"  sum="小计"/>
                    <field name="diff_real_sale_hsmame_actual_amount"/>
                    <field name="purchase_cost_total" sum="小计" groups="base.group_system"/>
                    <field name="org_real_purchase_amount_new" sum="小计"/>
                    <field name="purchase_hsname_actual_cost_total" sum="小计"/>
                    <field name="purchase_invoice_total_new"  sum="小计"/>
                    <field name="diff_real_purchase_hsname_actual_amount"/>

                    <field name="sale_amount" groups="base.group_system" invisible="1"/>
                    <field name="ciq_amount" groups="base.group_system" />
                    <field name="no_ciq_amount" groups="base.group_system" invisible="1"/>
                    <field name="state" invisible="1" groups="base.group_system"/>
                    <field name="company_currency_id" invisible="1" groups="base.group_system"/>
                    <field name="sale_currency_id" invisible="1"/>
                    <field name="third_currency_id" invisible="1" groups="base.group_system"/>
                    <field name="include_tax"/>
                    <field name="sale_invoice_total" string="应收金额" groups="base.group_system"/>

                    <field name="sale_invoice_paid" string="已收金额" groups="base.group_system"/>
                    <field name="sale_invoice_paid_new" string="已收金额" sum="小计" groups="base.group_system"/>
                    <field name="purhcase_invoice_total" string="应付金额" groups="base.group_system"/>

                    <field name="purhcase_invoice_paid" string="已付金额" groups="base.group_system"/>
                    <field name="purchase_invoice_paid_new" string="已付金额" sum="小计" groups="base.group_system"/>
                    <field name="back_tax_invoice_total" string="退税金额" groups="base.group_system"/>
                    <field name="back_tax_invoice_total_new" string="退税金额" sum="小计"/>
                    <field name="back_tax_invoice_paid" string="已收退税" groups="base.group_system"/>
                    <field name="back_tax_invoice_paid_new" string="已收退税" sum="小计" groups="base.group_system"/>
                    <field name="sale_invoice_balance" string="未收金额" groups="base.group_system"/>
                    <field name="sale_invoice_balance_new" string="未收金额" sum="小计"/>
                    <field name="purhcase_invoice_balance" string="未付金额" groups="base.group_system"/>
                    <field name="purchase_invoice_balance_new" string="未付金额" sum="小计"/>
                    <field name="back_tax_invoice_balance" string="未收退税" groups="base.group_system"/>
                    <field name="back_tax_invoice_balance_new" string="未收退税" sum="小计"/>
                    <field name="state_type" invisible="1"/>
                    <field name="create_date" invisible="1"/>
                    <field name="gongsi_id" string="销售主体" invisible="1"/>
                    <field name="purchase_gongsi_id" string="采购主体" invisible="1"/>


                </tree>
            </field>
        </record>
        <record id="view_transport_bill_tenyale_hexiao_tree" model="ir.ui.view">
            <field name="name">transport.bill.tree</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <tree string="已核销" default_order="hexiao_date" create="false">
                    <field name="current_date_rate" string="汇率"/>
                    <field name="ref"/>
                    <field name="name" invisible="1" groups="base.group_system"/>
                    <field name="date_out_in" string="出运日期"/>
                    <field name="hexiao_date"/>
                    <field name="partner_id" required="1"/>
                    <field name="invoice_paid_state" invisible="1"/>
                    <field name="org_sale_amount" groups="base.group_system"/>
                    <field name="org_sale_amount_new" sum="小计"/>

                    <field name="purchase_cost_total" sum="小计"/>

                    <field name="sale_amount" groups="base.group_system" invisible="1"/>
                    <field name="ciq_amount" groups="base.group_system" invisible="1"/>
                    <field name="no_ciq_amount" groups="base.group_system" invisible="1"/>

                    <field name="state" invisible="1" groups="base.group_system"/>

                    <field name="company_currency_id" invisible="1" groups="base.group_system"/>
                    <field name="sale_currency_id" invisible="1"/>
                    <field name="third_currency_id" invisible="1" groups="base.group_system"/>
                    <field name="include_tax"/>


                    <field name="sale_invoice_total" string="应收金额" groups="base.group_system"/>
                    <field name="sale_invoice_total_new" string="应收金额" sum="小计"/>
                    <field name="sale_invoice_paid" string="已收金额" groups="base.group_system"/>
                    <field name="sale_invoice_paid_new" string="已收金额" sum="小计" groups="base.group_system"/>
                    <field name="purhcase_invoice_total" string="应付金额" groups="base.group_system"/>
                    <field name="purchase_invoice_total_new" string="应付金额" sum="小计"/>
                    <field name="purhcase_invoice_paid" string="已付金额" groups="base.group_system"/>
                    <field name="purchase_invoice_paid_new" string="已付金额" sum="小计" groups="base.group_system"/>
                    <field name="back_tax_invoice_total" string="退税金额" groups="base.group_system"/>
                    <field name="back_tax_invoice_total_new" string="退税金额" sum="小计"/>
                    <field name="back_tax_invoice_paid" string="已收退税" groups="base.group_system"/>
                    <field name="back_tax_invoice_paid_new" string="已收退税" sum="小计" groups="base.group_system"/>
                    <field name="sale_invoice_balance" string="未收金额" groups="base.group_system"/>
                    <field name="sale_invoice_balance_new" string="未收金额" sum="小计"/>
                    <field name="purhcase_invoice_balance" string="未付金额" groups="base.group_system"/>
                    <field name="purchase_invoice_balance_new" string="未付金额" sum="小计"/>
                    <field name="back_tax_invoice_balance" string="未收退税" groups="base.group_system"/>
                    <field name="back_tax_invoice_balance_new" string="未收退税" sum="小计"/>
                    <field name="state_type" invisible="1"/>
                    <field name="create_date" invisible="1"/>
                    <field name="hexiao_type"/>
                    <field name="gongsi_id" string="销售主体" invisible="1"/>
                    <field name="purchase_gongsi_id" string="采购主体" invisible="1"/>


                </tree>
            </field>
        </record>
        <record id="view_transport_bill_tenyale_years_tree" model="ir.ui.view">
            <field name="name">transport.bill.tree</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <tree string="年度合同" default_order="date_out_in desc" create="false">
                    <field name="current_date_rate" string="汇率"/>
                    <field name="ref"/>
                    <field name="name" invisible="1" groups="base.group_system"/>
                    <field name="date_out_in" string="出运时间"/>
                    <field name="partner_id" required="1"/>
                    <field name="user_id" string="责任人"/>
                    <field name="invoice_paid_state" invisible="1"/>

                    <field name="org_sale_amount_new" sum="小计" groups="base.group_system"/>
                    <field name="org_real_sale_amount_new" sum="小计" />
                    <field name="org_hsname_actual_amount" sum="小计"/>
                    <field name="purchase_cost_total" sum="小计"/>

                    <field name="sale_amount" groups="base.group_system" invisible="1"/>
                    <field name="ciq_amount" groups="base.group_system" invisible="1"/>
                    <field name="no_ciq_amount" groups="base.group_system" invisible="1"/>

                    <field name="state" invisible="1" groups="base.group_system"/>

                    <field name="company_currency_id" invisible="1" groups="base.group_system"/>
                    <field name="sale_currency_id" invisible="1"/>
                    <field name="third_currency_id" invisible="1" groups="base.group_system"/>
                    <field name="include_tax"/>


                    <field name="sale_invoice_total" string="应收金额" groups="base.group_system"/>
                    <field name="sale_invoice_total_new" string="应收金额" sum="小计"/>
                    <field name="sale_invoice_paid" string="已收金额" groups="base.group_system"/>
                    <field name="sale_invoice_paid_new" string="已收金额" sum="小计" groups="base.group_system"/>
                    <field name="purhcase_invoice_total" string="应付金额" groups="base.group_system"/>
                    <field name="purchase_invoice_total_new" string="应付金额" sum="小计"/>
                    <field name="purhcase_invoice_paid" string="已付金额" groups="base.group_system"/>
                    <field name="purchase_invoice_paid_new" string="已付金额" sum="小计" groups="base.group_system"/>
                    <field name="back_tax_invoice_total" string="退税金额" groups="base.group_system"/>
                    <field name="back_tax_invoice_total_new" string="退税金额" sum="小计"/>
                    <field name="back_tax_invoice_paid" string="已收退税" groups="base.group_system"/>
                    <field name="back_tax_invoice_paid_new" string="已收退税" sum="小计" groups="base.group_system"/>
                    <field name="sale_invoice_balance" string="未收金额" groups="base.group_system"/>
                    <field name="sale_invoice_balance_new" string="未收金额" sum="小计"/>
                    <field name="purhcase_invoice_balance" string="未付金额" groups="base.group_system"/>
                    <field name="purchase_invoice_balance_new" string="未付金额" sum="小计"/>
                    <field name="back_tax_invoice_balance" string="未收退税" groups="base.group_system"/>
                    <field name="back_tax_invoice_balance_new" string="未收退税" sum="小计"/>
                    <field name="state_type" invisible="1"/>
                    <field name="create_date" invisible="1"/>
                    <field name="gongsi_id" string="销售主体" invisible="1"/>
                    <field name="purchase_gongsi_id" string="采购主体" invisible="1"/>


                </tree>
            </field>
        </record>
        <record id="view_transport_bill_tenyale_years_tree_new_721" model="ir.ui.view">
            <field name="name">transport.bill.tree</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <tree string="年度合同" default_order="date_out_in desc" decoration-danger="org_hsname_actual_amount != sale_invoice_total_new"  create="false">
                    <field name="current_date_rate" string="汇率"/>
                    <field name="ref"/>
                    <field name="name" invisible="1" groups="base.group_system"/>
                    <field name="date_out_in" string="出运时间"/>
                    <field name="partner_id" required="1"/>
                    <field name="user_id" string="责任人"/>
                    <field name="invoice_paid_state" invisible="1"/>
                    <field name="sale_type"/>
                    <field name="org_sale_amount_new" sum="小计" groups="base.group_system"/>
                    <field name="org_real_sale_amount_new" sum="小计" />
                    <field name="org_hsname_actual_amount" sum="小计"/>
                    <field name="ciq_amount" sum="小计" groups="base.group_system"/>
                    <field name="sale_invoice_total_new"  sum="小计"/>
                    <field name="diff_real_sale_hsmame_actual_amount"/>
                    <field name="org_real_purchase_amount_new" sum="小计"/>
                    <field name="purchase_hsname_actual_cost_total" sum="小计"/>
                    <field name="purchase_invoice_total_new"  sum="小计"/>
                    <field name="diff_real_purchase_hsname_actual_amount"/>
                    <field name="purchase_cost_total" sum="小计" groups="base.group_system"/>
                    <field name="sale_amount" groups="base.group_system" invisible="1"/>
                    <field name="no_ciq_amount" groups="base.group_system" invisible="1"/>
                    <field name="state" invisible="1" groups="base.group_system"/>
                    <field name="company_currency_id" invisible="1" groups="base.group_system"/>
                    <field name="sale_currency_id" invisible="1"/>
                    <field name="third_currency_id" invisible="1" groups="base.group_system"/>
                    <field name="include_tax"/>




                    <field name="back_tax_invoice_total_new"  sum="小计"/>
                    <field name="fzzc_back_tax_invoice_total_new"  sum="小计"/>
                    <field name="zc_invoice_profile_total_new" sum="小计"/>
                    <field name="sale_invoice_balance_new" sum="小计"/>
                    <field name="purchase_invoice_balance_new"  sum="小计"/>
                    <field name="back_tax_invoice_balance_new"  sum="小计"/>
                    <field name="fzzc_back_tax_invoice_residual_total_new"  sum="小计"/>
                    <field name="zc_invoice_profile_residual_total_new" sum="小计"/>





                    <field name="state_type" invisible="1"/>
                    <field name="create_date" invisible="1"/>
                    <field name="gongsi_id" string="销售主体" invisible="1"/>
                    <field name="purchase_gongsi_id" string="采购主体" invisible="1"/>


                </tree>
            </field>
        </record>

        <record id="view_transport_bill_tenyale_sales_kanban" model="ir.ui.view">
            <field name="name">transport.bill.kanban</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">

                    <field name="ref"/>
                    <field name="partner_id"/>
                    <field name="date"/>
                    <field name="org_sale_amount"/>
                    <field name="state"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_global_click">
                                <div class="row mb4">
                                    <div class="col-xs-6">
                                        <strong>
                                            <span>
                                                <field name="ref"/>
                                            </span>
                                        </strong>
                                    </div>
                                    <div class="col-xs-6 text-right">
                                        <strong>
                                            <i class="fa fa-clock-o"/>
                                            <t t-esc="record.date.value"/>
                                        </strong>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-12">
                                        <span>
                                            <field name="partner_id"/>
                                        </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-6">
                                        <field name="org_sale_amount" widget='monetary'/>
                                    </div>
                                    <div class="col-xs-6">
                                        <span class="pull-right label label-default">
                                            <field name="state" widget="kanban_label_selection"
                                                   options="{'classes': {'draft': 'default', 'sent': 'success'}}"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        <record id="view_transport_bill_tenyale_sales_form" model="ir.ui.view">
            <field name="name">transport.bill.form</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <form string="出运单">
                    <header>
                        <button name="action_draft" type="object" string="重置草稿" class="oe_highlight"
                                states="refused,cancel"/>
                        <button name="action_submit" states="draft" type="object" string="提交审批" class="oe_highlight"/>
                        <button name="action_sales_approve" states="submit" type="object" string="责任人审批"
                                class="oe_highlight"/>
                        <button name="action_approve" states="sales_approve" type="object" string="合规审批"
                                class="oe_highlight"/>
                        <button name="action_to_manager_approve" states="sales_approve" type="object" string="提交总经理特批"
                                class="oe_highlight"/>
                        <button name="action_manager_approve" states="manager_approve" type="object" string="总经理特批"
                                class="oe_highlight"/>
                        <button name="action_lock_stage" type="object" states="invoiced" string="锁定" groups="base.group_system"/>
                        <button name="%(transport_refuse_wizard_action)d" string="拒绝" type="action"
                                attrs="{'invisible':[('state','in',['invoiced','abnormal','verifying','done','paid','cancel','refused','draft'])]}"/>
                        <button name="action_hexiao" states="verifying" string="核销" type="object"/>
                        <button string="取消" type="object" confirm="确定要取消吗？取消后请即时删除单据" name="action_cancel"
                                states="draft,refused" class="oe_highlight"/>
                        <button string="添加销售明细" type="object" name="open_wizard_transport4sol"
                                confirm="重新添加销售明细，将会清除所有的清关和报关资料！是否继续"
                                attrs="{'invisible':['|',('operation_wizard','in',['first','second','third','fourth']),('state','not in',['draft'])]}"
                                class="oe_highlight"/>
                         <button name="make_new_order_track_tb" type="object" string="创建出运检查" groups="base.group_system"/>

                        <field name="state" widget="statusbar" statusbar_visible=" "/>
                    </header>
                    <header groups="base.group_system">
 <button string="计算合同号" name="compute_tb_ref_1" type="object"/>
                        <button string="添加向导" states="draft" type="object" name="open_transport_self" invisible="1"
                                context="{'form_xml_id':'yjzy_extend.view_transport_bill_wkf_form','name':'向导开始'}"
                                class="oe_highlight"/>
                        <button string="添加销售合同" states="draft" type="object" invisible="1"
                                name="open_wizard_transport4so"
                                class="oe_highlight"/>
                        <button string="添加销售明细" type="object" name="open_wizard_transport4sol"
                                confirm="重新添加销售明细，将会清除所有的清关和报关资料！是否继续"
                                attrs="{'invisible':['|',('operation_wizard','in',['first','second','third','fourth','fifth']),('state','not in',['draft'])]}"
                                class="oe_highlight"/>
                        <button string="调取剩余订单数量" invisible="0" type="object" name="make_default_lot_plan"
                                confirm="该命令将会初始化本次出运数量！是否继续？"
                                attrs="{'invisible': [('operation_wizard','in',['first','second','third','fourth']),('is_done_plan','=',True)]}"
                                class="oe_highlight"/>
                        <button string="重新生成所有数据" name="make_all_document" confirm="该命令将会初始化清关资料，报关资料和供应商发货通知单！是否继续？"
                                attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth']),('is_done_all_document','=',True)]}"
                                class="oe_highlight"
                                type="object"/>
                        <button string="销售统计" name="make_sale_collect"
                                attrs="{'invisible': [('operation_wizard','in',['first','second','third','fourth']),('sale_collect_state','!=','draft')]}"
                                class="oe_highlight"
                                type="object"/>
                        <button string="采购统计" name="make_purchase_collect"
                                attrs="{'invisible': [('operation_wizard','in',['first','second','third','fourth']),('purchase_collect_state','!=','draft')]}"
                                class="oe_highlight" type="object"/>
                        <!--button string="计算装箱数据" type="object" name="compute_pack_data" class="oe_highlight"/-->
                        <button string="清关统计" type="object" name="create_qingguan_lines"
                                attrs="{'invisible': [('operation_wizard','in',['first','second','third','fourth']),('qingguan_state','!=','draft')]}"
                                class="oe_highlight"/>
                        <button name="split_tuopan_all" type="object" string="分配托盘重量体积"
                                attrs="{'invisible': [('operation_wizard','in',['first','second','third','fourth']),('is_done_all_document','=',True)]}"
                                class="oe_highlight"/>
                        <button string="返点统计" invisible="1" name="make_fandian_collect"
                                attrs="{'invisible': 1}"
                                class="oe_highlight" type="object"/>
                        <button string="生成供应商发货单" type="object" name="make_tb_vendor"
                                attrs="{'invisible': [('operation_wizard','in',['first','second','third','fourth']),('is_done_tb_vendor','=',True)]}"
                                class="oe_highlight"/>

                        <button name="compute_tb_ref" type="object" string="计算出运合同号" class="oe_highlight"/>
                        <button string="出入库一次完成" invisible="1" states="confirmed" type="object" name="onece_all_stage"
                                class="oe_highlight"/>
                        <!--button string="计算利润" states="confirmed" type="object" name="compute_amount"
                                class="oe_highlight"/-->
                        <button string="销售发票" invisible="0" type="object" name="make_sale_invoice" class="oe_highlight"
                                attrs="{'invisible': [('sale_invoice_count','>', 0)]}"/>
                        <button string="采购发票" invisible="0" type="object" name="make_purchase_invoice"
                                class="oe_highlight"
                                attrs="{'invisible': [('purchase_invoice_count','>', 0)]}"/>
                        <button string="退税发票" invisible="0" type="object" name="make_back_tax_invoice"
                                class="oe_highlight"
                                attrs="{'invisible': [('back_tax_invoice_count','>', 0)]}"/>
                        <!--在出入库一次完成的时候，发票全部自动生成草稿状态，之后点发票过账，判断进仓日期，完成过账-->
                        <button string="发票过账" invisible="0" type="object" name="sync_data2invoice" class="oe_highlight"
                        />
                        <!--button string="计算明细批次" type="object" name="make_tbl_lot" class="oe_highlight"/-->

                        <!--button string="付款" type="object" name="open_account_payment" class="oe_highlight"/-->
                        <button string="打印供应商发货单" invisible="1" type="object" name="action_transport_bill_vendor_report"
                                class="oe_highlight"/>
                        <button string="打印成本单" type="object" name="print_cost"
                                class="oe_highlight"/>

                        <button string="更新退税率" type="object" name="update_back_tax" class="oe_highlight"
                                groups="base.group_system"/>

                        <field name="stage_id" widget="statusbar" clickable="0" statusbar_visible=" "/>

                    </header>


                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" type="object" string="清关资料"
                                    attrs="{'invisible':[('qg_count','=',0)]}"
                                    name="open_transport_bill_clearance"
                                    icon="fa-usd">
                                <field name="qg_count"/>
                            </button>
                            <button class="oe_stat_button" type="object" string="报关资料"
                                    attrs="{'invisible':[('bg_count','=',0)]}" name="open_transport_bill_declare"

                                    icon="fa-usd">
                                <field name="bg_count"/>
                            </button>
                            <button class="oe_stat_button" type="object" string="发货通知单" invisible="1"
                                    attrs="{'invisible':[('fhtzd_count','=',0)]}"
                                    name="open_transport_bill_delivery"
                                    icon="fa-usd">
                                <field name="fhtzd_count"/>
                            </button>
                            <button class="oe_stat_button" type="object" string="发货通知单"
                                    attrs="{'invisible':[('fhtzd_count','=',0)]}"
                                    name="open_transport_bill_supplier"
                                    icon="fa-usd">
                                <field name="fhtzd_count"/>
                            </button>

                            <button name="open_sale_invoice" type="object" class="oe_stat_button"
                                    attrs="{'invisible':[('sale_invoice_count','=',0)]}"
                                    icon="fa-pencil-square-o"
                                    string="应收账单">
                                <field name="sale_invoice_count"/>
                            </button>
                            <button name="open_purchase_invoice" type="object" class="oe_stat_button"
                                    attrs="{'invisible':[('purchase_invoice_count','=',0)]}"
                                    icon="fa-pencil-square-o"
                                    string="应付账单">
                                <field name="purchase_invoice_count"/>
                            </button>
                            <button name="open_back_tax_invoice" type="object" class="oe_stat_button"
                                    attrs="{'invisible':[('back_tax_invoice_count','=',0)]}"
                                    icon="fa-pencil-square-o"
                                    string="退税应收">
                                <field name="back_tax_invoice_count"/>
                            </button>
                            <field name="is_editable" widget="boolean_toggle" groups="sales_team.group_manager"/>
                        </div>
                        <group col="3">
                            <group name="general_information">

                                <button string="生成合同号以及清关报关资料" colspan="2" name="make_all_document" class="oe_highlight"
                                        attrs="{'invisible':[('operation_wizard','not in',['fourth'])]}"
                                        confirm="该命令将会初始化清关资料，报关资料和供应商发货通知单！是否继续？"

                                        type="object"/>
                                <field name="id" invisible="1"/>
                                <field name="ref"
                                       attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)],'invisible':[('operation_wizard','in',['first','second','third','fourth'])]}"/>
                                <field name="name" readonly="1" groups="base.group_system" invisible="1"/>

                                <field name="partner_id" string="贸易客户" required="0" options="{'no_open':1}"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"
                                       domain="[('customer','=',True),('parent_id', '=', False),'|','|','|','|','|','|',('x_studio_field_U7OvH','in',uid),
                                       ('assistant_id','=',uid),('user_id','=',uid),('parent_id.assistant_id','=',uid),
                                       ('parent_id.user_id','=',uid),('supplier','=',1),('x_studio_field_3ErQR','=',1)]"
                                       no_create="True"/>

                                <field name="partner_shipping_id" string="最终目的地" options="{'no_open':1}"
                                       domain="[('parent_id','child_of', partner_id)]"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)],'invisible':['|',('partner_id','=',False),('operation_wizard','in',['first'])]}"
                                       no_create="True"/>
                                <field name="date" string="预计出运日期"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"
                                       invisible="1"/>
                                <field name="date_project" string="预计出运日期"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="current_date_rate" string="成本测算汇率"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <button string="添加销售明细" type="object" colspan="2"
                                        attrs="{'invisible':['|',('partner_id','=',False),('operation_wizard','not in',['second'])]}"
                                        name="open_wizard_transport4sol" class="oe_highlight"/>
                                <field name="partner_invoice_id" domain="[('parent_id','child_of', partner_id)]"
                                       invisible="1"
                                       attrs="{'readonly': [('locked','=',True)]}" groups="base.group_system"/>
                                <label for="incoterm" string="价格条款"
                                       attrs="{'invisible':[('operation_wizard','in',['first','second'])]}"/>
                                <div class="o_row" attrs="{'invisible':[('operation_wizard','in',['first','second'])]}">
                                    <span style="display:contents!important">
                                        <field name="incoterm" string="价格条款" options="{'no_open':1,'no_create':1}"
                                               attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)],'required':[('state','=','check')]}"/>
                                    </span>
                                    <button name="open_same"
                                            attrs="{'invisible':['|',('same_incoterm','=',True),('operation_wizard','in',['first','second'])]}"
                                            type="object" class="btn-xs btn-link mb4 fa fa-times-circle" icon=""
                                            style="color:red" context="{'default_open':'incoterm'}"/>
                                </div>
                                <field name="same_incoterm" invisible="1"/>
                                <label for="payment_term_id" string="付款条款"
                                       attrs="{'invisible':[('operation_wizard','in',['first','second'])]}"/>
                                <div class="o_row" attrs="{'invisible':[('operation_wizard','in',['first','second'])]}">
                                    <field name="payment_term_id" options="{'no_open':1,'no_create':1}"
                                           attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)],'required':[('state','=','check')]}"/>
                                    <button name="open_same"
                                            attrs="{'invisible':['|',('operation_wizard','in',['first','second']),('same_payment_term','=',True)]}"
                                            type="object" class="btn-xs btn-link mb4 fa fa-times-circle" icon=""
                                            style="color:red" context="{'default_open':'payment_term'}"/>
                                </div>
                                <field name="same_payment_term" invisible="1"/>

                                <label for="sale_currency_id" string="交易货币"
                                       attrs="{'invisible':[('operation_wizard','in',['first','second'])]}"/>
                                <div class="o_row" attrs="{'invisible':[('operation_wizard','in',['first','second'])]}">
                                    <field name="sale_currency_id" options="{'no_open':1,'no_create':1}"
                                           attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)],'required':[('state','=','check')]}"/>
                                    <button name="open_same"
                                            attrs="{'invisible':['|',('operation_wizard','in',['first','second']),('same_currency','=',True)]}"
                                            type="object" class="btn-xs btn-link mb4 fa fa-times-circle" icon=""
                                            style="color:red" context="{'default_open':'currency'}"/>
                                </div>
                                <field name="same_currency" invisible="1"/>
                                <label for="include_tax" string="含税"
                                       attrs="{'invisible':[('operation_wizard','in',['first','second'])]}"/>
                                <div class="o_row" attrs="{'invisible':[('operation_wizard','in',['first','second'])]}">
                                    <field name="include_tax"
                                           attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                    <button name="open_same"
                                            attrs="{'invisible':['|',('operation_wizard','in',['first','second']),('same_include_tax','=',True)]}"
                                            type="object" class="btn-xs btn-link mb4 fa fa-times-circle" icon=""
                                            style="color:red" context="{'default_open':'include_tax'}"/>
                                </div>
                                <field name="same_include_tax" invisible="1"/>

                                <field name="contract_type" groups="base.group_system"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)],'invisible':[('operation_wizard','in',['first','second','third','fourth'])]}"/>
                                <field name="gongsi_id" options="{'no_open':1}" string="销售主体"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)],'invisible':[('operation_wizard','in',['first','second','third','fourth'])]}"/>
                                <field name="purchase_gongsi_id" options="{'no_open':1}" string="采购主体"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)],'invisible':[('operation_wizard','in',['first','second','third','fourth'])]}"/>
                                <field name="locked"/>
                            </group>
                            <group attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth'])]}">


                                <field name="sale_currency_id" invisible="1"/>
                                <field name="fee_inner"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>


                                <field name="fee_rmb1"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>

                                <field name="fee_rmb1_note" string="人民币备注1"
                                       attrs="{'readonly':[('state','not in',['draft','refused']),('is_editable','=',False)],'invisible':[('fee_rmb1','=',0)]}"/>
                                <field name="fee_rmb2"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="fee_rmb2_note" string="人民币备注2"
                                       attrs="{'readonly':[('state','not in',['draft','refused']),('is_editable','=',False)],'invisible':[('fee_rmb2','=',0)]}"/>
                                <field name="fee_outer"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="outer_currency_id" invisible="1" readonly="1"/>
                                <field name="fee_export_insurance"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="export_insurance_currency_id" invisible="1" readonly="1"/>
                                <field name="fee_other"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="other_currency_id" readonly="1" invisible="1"/>
                                <field name="fee_other_note" string="其他外币备注1"
                                       attrs="{'readonly':[('state','not in',['draft','refused']),('is_editable','=',False)],'invisible':[('fee_other','=',0)]}"/>
                                <field name="fee_outer_need" string="运保费计入应收" readonly="1" invisible="1"/>
                                <button name="compute_fee" type="object" string="计算取得销售合同费用预算" confirm="将会初始化费用金额"
                                        attrs="{'invisible':[('is_fee_done','=',True)]}" colspan="2"/>
                                <button name="open_fee" type="object" string="查看原始合同预算费用"
                                        attrs="{'invisible':[('is_fee_done','=',False)]}" colspan="2"/>
                            </group>
                            <group attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth'])]}">


                                <field name="pallet_type"
                                       attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)]}"/>
                                <field name="pallet_qty"
                                       attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)]
                                               }"/>
                                <field name="tuopan_weight" string="托盘总重"
                                       attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)]
                                               }"/>
                                <field name="tuopan_volume" string="托盘总体积"
                                       attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)]
                                               }"/>
                                <button name="split_tuopan_all" type="object" string="分配托盘重量体积" colspan="2"
                                        attrs="{'invisible':[('is_done_tuopan','=',False)]}"/>
                                <button name="split_tuopan_all" type="object" string="重新分配托盘重量体积"
                                        confirm="将会初始化托盘的重量体积分配"
                                        attrs="{'invisible':['|',('state','in',['invoiced','abnormal','verifying','done','paid']),('is_done_tuopan','=',True)]}"
                                        colspan="2"/>
                                <!-- name="account_type"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/-->
                                <field name="trans_type"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"
                                       invisible="0"/>
                                <field name="cip_type"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"
                                       invisible="0"/>
                                <field name="sale_type"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)],'required':[('state','=','check')]}"/>
                                <field name="credit_info" invisible="1"/>
                                <field name="insurance_info" invisible="1"/>

                                <field name="gold_sample_state" readonly="1" string="金样管理"/>
                                <field name="ps_state" readonly="1" string="PS管理"/>
                                <field name="hs_fill" groups="base.group_system"/>
                                <field name="create_date" string="创建日期" invisible="1" attrs="{'readonly': 1}"
                                       options="{'no_open':1}"
                                       widget="date"/>
                                <field name="description" string="出运备注"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}"/>
                                <field name="user_id" readonly="1" no_create="True" string="责任人"
                                       options="{'no_open':1}"/>
                                <field name="sale_assistant_id" readonly="1" invisible="0" options="{'no_open':1}"/>
                                <field name="is_discount"/>

                            </group>


                        </group>
                        <notebook>
                            <page string="明细" name="cymx" groups="sales_team.group_sale_assistant"
                                  attrs="{'invisible':[('operation_wizard','in',['first','second'])]}">
                                <group>
                                    <button name="finish_delivery_qty" string="出运数量确认完成"
                                            attrs="{'invisible':[('operation_wizard','in',['fourth','fifth'])]}"
                                            class="oe_highlight" type="object"/>
                                    <button name="finish_delivery_qty" string="重新修改出运数量" invisible="1"/>
                                    <button string="继续添加销售明细" type="object" name="open_wizard_transport4sol"
                                            confirm="重新添加销售明细，将会清除所有的清关和报关资料！是否继续"
                                            attrs="{'invisible':['|',('operation_wizard','in',['third','fourth','fourth','fifth']),('state','not in',['draft'])]}"
                                            class="oe_highlight"/>
                                </group>
                                <field name="line_ids"
                                       attrs="{'readonly':[('state','not in',['draft','check','refused','cancel']),('is_editable','=',False)]}">
                                    <tree create="false" editable="bottom">
                                        <button icon="fa-paper-plane" type="object" help="请点击，并初始化发货数量和金额等信息！"
                                                attrs="{'invisible':[('parent.state','not in',['draft']),('parent.is_editable','=',False)]}"
                                                name="make_default_lot_plan"/>
                                        <field name="sale_contract_code" string="销售合同"/>
                                        <field name="company_currency_id" invisible="1"/>
                                        <field name="sale_currency_id" invisible="1"/>
                                        <field name="third_currency_id" invisible="1"/>
                                        <field name="name" invisible="1"/>
                                        <field name="sol_id" invisible="1"/>
                                        <field name="so_id" groups="base.group_system" invisible="1"/>
                                        <field name="product_id" options="{'no_open':1}"/>
                                        <field name="hs_id" invisible="1"/>
                                        <field name="sale_qty" sum="小计" string="原始数量"/>
                                        <field name="qty_undelivered" invisible="1"/>
                                        <field name="rest_tb_qty" string="本次出运后剩余数量"/>


                                        <field name="plan_qty" string="本次出运数量" sum="小计"/>
                                        <field name="so_tb_number" string="批次"/>
                                        <field name="lot_plan_id" invisible="1"/>

                                        <field name="smline_str" groups="base.group_system" invisible="1"/>
                                        <field name="smline_qty" groups="base.group_system" invisible="1"/>
                                        <field name="dlr_str" string="采购数" invisible="1"/>

                                        <field name="dlr_qty" groups="base.group_system" invisible="1"/>
                                        <field name="qty1stage" groups="base.group_system" invisible="1"/>
                                        <field name="org_currency_sale_amount_origin" string="出运原金额"/>
                                        <field name="org_currency_sale_amount" sum="销售" string="出运销售金额"/>

                                        <field name="sale_amount" sum="销售" groups="base.group_system" invisible="1"/>
                                        <field name="back_tax"/>
                                        <field name="purchase_cost" sum="采购" string="出运采购金额"/>
                                        <field name="purchase_cost_new" sum="采购" string="出运采购金额:new"
                                               groups="base.group_system"/>
                                        <field name="stock_cost" sum="库存" groups="base.group_system" invisible="1"/>
                                        <field name="back_tax"/>

                                        <field name="vat_diff_amount" invisible="1"/>
                                        <field name="back_tax_amount" sum="退税"/>
                                        <field name="state" groups="base.group_system" invisible="1"/>
                                        <field name="plan_lot" readonly="1" string="采购合同号" context="{'show_po_code': 1}"
                                               options="{'no_open':1}"/>

                                        <field name="s_uom_id" groups="base.group_system" invisible="1"/>
                                        <field name="p_uom_id" groups="base.group_system" invisible="1"/>
                                        <field name="need_print" invisible="1"/>
                                        <field name="is_gold_sample"/>
                                        <field name="is_ps"/>


                                        <button icon="fa-list" type="object" name="open_wizard_transport_lot_plan"
                                                attrs="{'invisible': [('state','!=', 'draft')]}" invisible="1"/>

                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="so_id"/>
                                            </group>
                                            <group>
                                                <field name="product_id"/>
                                            </group>
                                        </group>
                                        <notebook>
                                            <page string="安排的批次计划">
                                                <field name="id"/>
                                                <field name="lot_plan_ids">
                                                    <tree editable="bottom">
                                                        <field name="tbline_id" invisible="0"/>
                                                        <field name="lot_id"
                                                               domain="[('product_id', '=', parent.product_id)]"/>
                                                        <field name="qty"/>
                                                        <field name="stage_1"/>
                                                        <field name="stage_2"/>
                                                    </tree>
                                                </field>
                                            </page>
                                            <page string="调拨明细">
                                                <group>
                                                    <field name="stage1move_ids"/>
                                                    <field name="stage2move_ids"/>
                                                </group>

                                            </page>

                                        </notebook>


                                    </form>
                                </field>
                                <group class="oe_subtotal_footer oe_right">
                                    <field name="back_tax_amount_org"/>
                                    <field name="org_sale_amount_new_origin" attrs="{'invisible':[('is_discount','=',False)]}"/>
                                    <field name="org_real_sale_amount_new"/>
                                    <field name="org_hsname_actual_amount"/>
                                    <field name="org_sale_amount_new_discount" string="折扣" attrs="{'invisible':[('is_discount','=',False)]}"/>
                                    <field name="org_sale_amount_new" class="oe_subtotal_footer_separator"/>

                                    <field name="purchase_cost_total" class="oe_subtotal_footer_separator"
                                           attrs="{'invisible': [('state', '=', 'draft')]}"/>

                                </group>

                            </page>

                            <page string="明细批次" attrs="{'readonly': [('locked','=',True)]}" name="pcmx" invisible="1"
                                  groups="base.group_system">
                                <field name="tbl_lot_ids">
                                    <tree string="明细批次">
                                        <field name="lot_id"/>
                                        <field name="qty"/>
                                        <field name="so_id"/>
                                        <field name="po_id"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="相关调拨" invisible="1">
                                <field name="picking_ids"/>
                            </page>
                            <page string="调拨" groups="base.group_system" name="db" invisible="1">
                                <group>
                                    <field name="stage1picking_ids" readonly="1"/>
                                    <field name="stage2picking_ids" readonly="1"/>
                                </group>
                            </page>
                            <page string="调拨明细" groups="base.group_system" name="dbmx" invisible="1">
                                <group>
                                    <field name="stage1move_ids" readonly="1"/>
                                    <field name="stage2move_ids" readonly="1"/>
                                </group>
                            </page>
                            <page string="付款信息" name="fkxx" groups="base.group_system" invisible="1">
                                <button name="get_payment_info" string="获取付款记录" class="oe_highlight" type="object"/>
                                <group>
                                    <field name="sale_currency_id"/>
                                    <field name="ciq_amount"/>
                                    <field name="no_ciq_amount"/>
                                    <field name="amount_public1"/>
                                    <field name="amount_public2"/>
                                    <field name="amount_private1"/>
                                    <field name="amount_private2"/>
                                    <field name="amount_diff"/>
                                    <field name="amount_received"/>
                                    <field name="amount_real_payment"/>
                                    <field name="amount_account_payment"/>
                                    <field name="amount_account_adjust"/>
                                </group>
                                <group>
                                    <field name="sale_invoice_id" invisible="1"/>
                                    <field name="back_tax_invoice_id" invisible="1"/>
                                    <field name="invoice_in_ids" readonly="1"/>
                                    <field name="purchase_invoice_ids" readonly="1"/>
                                </group>

                            </page>
                            <page string="订舱信息" name="dcxx"
                                  attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth','fifth'])]}">
                                <group>
                                    <group>
                                        <field name="production_sale_unit"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="invoice_title"/>
                                        <!--field name="mark_ids" widget="many2many_tags"/-->
                                        <field name="partner_mark_comb_ids" invisible="1"/>
                                        <field name="mark_text"/>
                                        <field name="mark_comb_id" invisible="1"
                                               domain="[('id', 'in', partner_mark_comb_ids)]"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"
                                               string="唛头"/>
                                        <field name="notice_man"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="delivery_man"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="wharf_src_id" options="{'no_open':1}"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="wharf_dest_id" options="{'no_open':1}"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="forwarder_name"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="settlement"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="notice"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                        <field name="demand_info"
                                               attrs="{'readonly':[('state','not in',['draft','submit','sales_approve','approve']),('is_editable','=',False)]}"/>
                                    </group>
                                </group>

                            </page>

                            <page string="清关资料" name="qgzl" invisible="1"
                                  attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth','fifth'])]}">

                                <field name="qingguan_line_ids"
                                       attrs="{'readonly':[('state','not in',['draft','check']),('is_editable','=',False)]}">
                                    <tree editable="bottom">
                                        <field name="company_currency_id" invisible="1"/>
                                        <field name="sale_currency_id" invisible="1"/>
                                        <field name="third_currency_id" invisible="1"/>
                                        <field name="so_id" string="销售合同"/>
                                        <field name="product_id"/>
                                        <field name="source_area"/>
                                        <field name="source_country_id"/>
                                        <field name="uom_id" groups="base.group_system" invisible="1"/>
                                        <field name="s_uom_id" string="单位"/>
                                        <field name="price"/>
                                        <field name="qty" sum="小计"/>
                                        <field name="qty_package" sum="小计" groups="base.group_system" invisible="1"/>
                                        <field name="package_qty" sum="小计" string="箱数"/>
                                        <field name="net_weight" sum="小计"/>
                                        <field name="gross_weight" sum="小计"/>
                                        <field name="tuopan_weight" sum="小计" string="托重"/>
                                        <field name="shiji_weight" sum="小计"/>
                                        <field name="volume" sum="小计" string="体积"/>
                                        <field name="tuopan_volume" sum="小计" string="托体积"/>
                                        <field name="shiji_volume" sum="小计"/>
                                        <field name="sub_total" sum="小计"/>
                                    </tree>

                                </field>
                                <group>
                                    <field name="qingguan_description"
                                           attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)]}"/>
                                </group>
                            </page>
                            <page string="销售订单" groups="base.group_system" invisible="1">
                                <field name="so_ids"/>
                            </page>
                            <page string="采购订单" groups="base.group_system" invisible="1">
                                <field name="po_ids"/>
                            </page>
                            <page string="销售分解组合" groups="base.group_system" invisible="1">
                                <field name="comb_ids">
                                    <tree editable="bottom">
                                        <field name="product_id"/>
                                        <field name="hs_id"/>
                                        <field name="po_id"/>
                                        <field name="so_id"/>
                                        <field name="out_qty"/>
                                        <field name="price"/>
                                        <field name="amount"/>
                                        <field name="note"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="报关资料" invisible="1"
                                  attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth','fifth'])]}">
                                <header>
                                    <button name="action_sale_purchase" type="object" class="oe_highlight"
                                            string="报关Invoice资料"/>
                                    <button name="action_packaging" type="object" class="oe_highlight"
                                            string="装箱Packing list资料"/>
                                    <!--button name="action_others" type="object" string="其他信息" /-->
                                </header>
                                <field name="hsname_ids"
                                       attrs="{'readonly':[('state','not in',['draft','sales_approve']),('is_editable','=',False)]}">
                                    <tree editable="bottom" decoration-danger="purchase_hs_id==False">
                                        <field name="purchase_hs_id" string="采购对应" groups="base.group_system"/>
                                        <button name="make_suppliser_hs" type="object" icon="fa-plus-circle"
                                                attrs="{'invisible':[('purchase_hs_id','!=',False)]}"/>
                                        <field name="id" groups="base.group_system"/>
                                        <field name="package_tag" invisible="1"/>
                                        <field name="name" invisible="1"/>

                                        <field name="dump_product_id" groups="base.group_system" invisible="1"/>
                                        <field name="hs_id" attrs="{'required':[('purchase_hs_id','=',False)]}"/>
                                        <field name="hs_en_name" groups="base.group_system" invisible="1"/>
                                        <field name="out_qty2" sum="小计" string="报关数量"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)]}"/>
                                        <field name="po_id" string="采购合同"
                                               attrs="{'required':[('purchase_hs_id','=',False)],'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>

                                        <field name="amount" sum="小计" string="销售额"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)],'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>

                                        <field name="price2" string="实际采购单价" readonly="1"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="amount2" sum="小计" string="金额"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)],'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="price" string="原始采购单价" invisible="1"/>
                                        <field name="purchase_amount" string="原始采购额" sum="小计"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)],'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>

                                        <field name="purchase_amount2" sum="小计" string="实际采购额"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)],'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="back_tax" readonly="1"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="purchase_back_tax_amount2" sum="小计" string="退税额" readonly="1"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="out_qty" sum="小计" invisible="1"/>

                                        <field name="hs_id2" invisible="1"/>
                                        <field name="dump_product_id2" groups="base.group_system" invisible="1"/>


                                        <field name="source_area"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="source_country_id"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','sale_purchase')]}"/>
                                        <field name="qty_max" sum="小计" string="件数"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="qty_mid" groups="base.group_system" invisible="1"/>
                                        <field name="qty_min" groups="base.group_system" invisible="1"/>
                                        <field name="net_weight" sum="小计"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="gross_weight" sum="小计"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="tuopan_weight" string="托重"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="shiji_weight" sum="小计"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="volume" string="体积" sum="小计"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="tuopan_volume" string="托体积" sum="小计"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="shiji_volume" sum="小计"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="keyword"
                                               attrs="{'column_invisible': [('parent.hs_fill','!=','packaging')]}"/>
                                        <field name="type" invisible="1"/>
                                        <field name="note" invisible="1"/>
                                        <button name="open_form_view" type="object" icon="fa-arrows-v"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="package_tag"/>
                                                <field name="name" readonly="0"/>
                                                <field name="dump_product_id" readonly="0"/>
                                                <field name="hs_id" readonly="0"/>
                                                <field name="hs_en_name" readonly="0"/>
                                                <field name="po_id"/>
                                                <field name="back_tax" readonly="1"/>
                                                <field name="out_qty" readonly="0"/>
                                                <field name="price"/>
                                                <field name="purchase_amount"/>
                                                <field name="purchase_amount2"/>
                                                <field name="amount"/>
                                                <field name="hs_id2"/>
                                                <field name="dump_product_id2"/>
                                                <field name="out_qty2"/>
                                                <field name="price2"/>
                                                <field name="amount2"/>
                                            </group>
                                            <group>
                                                <field name="source_area"/>
                                                <field name="source_country_id"/>
                                                <field name="qty_max"/>
                                                <field name="qty_mid" invisible="1"/>
                                                <field name="qty_min" readonly="1"/>
                                                <field name="net_weight"/>
                                                <field name="gross_weight"/>
                                                <field name="tuopan_weight"/>
                                                <field name="shiji_weight"/>
                                                <field name="volume"/>
                                                <field name="tuopan_volume"/>
                                                <field name="shiji_volume"/>
                                                <field name="type"/>
                                                <field name="note"/>
                                            </group>
                                        </group>
                                        <group>
                                            <field name="keyword"/>
                                        </group>
                                    </form>


                                </field>
                                <field name="description_baoguan"/>
                            </page>

                            <page string="采购明细" groups="base.group_system" invisible="1">
                                <field name="btl_supplier_ids">
                                    <tree editable="bottom">
                                        <field name="tbl_id"/>
                                        <field name="id" groups="base.group_system"/>
                                        <field name="product_id"/>
                                        <field name="lot_plan_id"/>
                                        <field name="lot_id"/>
                                        <field name="po_id"/>
                                        <field name="need_purchase_fandian"/>
                                        <field name="purchase_fandian_ratio"/>
                                        <field name="purchase_fandian_partner_id"/>

                                        <field name="supplier_id"/>
                                        <field name="qty" sum="Total"/>
                                        <field name="price"/>
                                        <field name="amount" sum="Total"/>
                                        <field name="tongji_type"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="采购BOM分解组合" groups="base.group_system" invisible="1">
                                <field name="btls_comb_ids">
                                    <tree editable="bottom">
                                        <field name="product_id"/>
                                        <field name="hs_id"/>
                                        <field name="qty" sum="Total"/>
                                        <field name="price"/>
                                        <field name="amount" sum="Total"/>
                                        <field name="supplier_id"/>
                                        <field name="po_id"/>
                                        <field name="tongji_type"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="报关采购统计" invisible="1">
                                <field name="btls_hs_ids"
                                       attrs="{'readonly':[('state','not in',['draft']),('is_editable','=',False)]}">
                                    <tree editable="bottom">
                                        <field name="sale_hs_id" domain="[('tb_id','=', parent.id)]" string="销售统计"/>
                                        <field name="sale_hs_db_id"/>
                                        <field name="supplier_id"/>
                                        <field name="name"/>
                                        <field name="po_id"/>
                                        <field name="po_code" groups="base.group_system" invisible="1"/>
                                        <field name="hs_id"/>
                                        <field name="product_id" groups="base.group_system" invisible="1"/>
                                        <field name="qty" groups="base.group_system" invisible="1"/>
                                        <field name="price" groups="base.group_system" invisible="1"/>
                                        <field name="amount" groups="base.group_system" invisible="1"/>
                                        <field name="back_tax" groups="base.group_system"/>
                                        <field name="back_tax_amount" groups="base.group_system" invisible="1"/>
                                        <field name="hs_id2"/>
                                        <field name="product_id2" groups="base.group_system" invisible="1"/>
                                        <field name="qty2" groups="base.group_system" invisible="1"/>
                                        <field name="price2" groups="base.group_system" invisible="1"/>
                                        <field name="amount2"/>
                                        <field name="back_tax2"/>
                                        <field name="back_tax_amount2"/>
                                        <field name="tongji_type"/>
                                    </tree>
                                </field>
                            </page>
                            <!--page string="返点明细">
                                <field name="fandian_ids">
                                    <tree>
                                        <field name="supplier_id"/>
                                        <field name="partner_id"/>
                                        <field name="purchase_amout"/>
                                        <field name="fandian_amount"/>
                                    </tree>
                                </field>
                            </page-->
                            <page string="供应商发货通知" invisible="1"
                                  attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth','fifth'])]}">
                                <field name="tb_vendor_ids"/>
                            </page>
                            <page string="费用明细" invisible="0">
                                <field name="expense_ids" readony="1">
                                    <tree>
                                        <field name="date"/>
                                        <field name="create_uid"/>
                                        <field name="employee_id" string="责任人"/>
                                        <field name="categ_id" context="{'search_order': 'sequence','only_name':1}"/>
                                        <field name="second_categ_id"
                                               context="{'search_order': 'sequence','only_name':1}"/>
                                        <field name="product_id" string="小类"/>
                                        <field name="payment_date"/>
                                        <field name="currency_id" invisible="1"/>
                                        <field name="company_currency_id" invisible="1"/>
                                        <field name="currency_id" invisible="1"/>
                                        <field name="total_amount" sum="小计" widget="monetary"/>
                                        <field name="company_currency_total_amount" sum="小计"/>
                                        <field name="budget_amount"/>
                                        <field name="budget_id"/>
                                        <field name="state"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="时间管理页面" groups="base.group_system"
                                  attrs="{'invisible':[('operation_wizard','in',['first','second','third','fourth'])]}">
                                <group>
                                    <group>
                                        <field name="submit_date" attrs="{'readonly':1}"/>
                                        <field name="submit_uid" attrs="{'readonly':1}"/>
                                        <field name="sales_confirm_date" attrs="{'readonly':1}"/>
                                        <field name="sales_confirm_uid" attrs="{'readonly':1}"/>
                                        <field name="approve_date" attrs="{'readonly':1}"/>
                                        <field name="approve_uid" attrs="{'readonly':1}"/>
                                    </group>
                                    <group>
                                        <label for="date_out_in" string="进仓日"/>
                                        <div class="o_row">
                                            <field name="date_out_in" attrs="{'readonly':1}"
                                            />
                                            <button name="open_transport_self" icon="fa-paperclip" type="object"
                                                    context="{'form_xml_id': 'yjzy_extend.view_transport_bill_date_out_in'}"
                                                    string="附件"/>
                                        </div>
                                        <field name="date_out_in_state" string="进仓日审批" attrs="{'readonly':1}"/>
                                        <label for="date_ship" string="出运船日"/>
                                        <div class="o_row">
                                            <field name="date_ship" attrs="{'readonly':1}"/>
                                            <button name="open_transport_self" icon="fa-paperclip" type="object"
                                                    context="{'form_xml_id': 'yjzy_extend.view_transport_bill_date_ship'}"
                                                    string="附件"/>
                                        </div>
                                        <field name="date_ship_state" string="出运船审批" attrs="{'readonly':1}"/>
                                        <label for="date_customer_finish" string="客户交单日"/>
                                        <div class="o_row">
                                            <field name="date_customer_finish" attrs="{'readonly':1}"/>
                                            <button name="open_transport_self" icon="fa-paperclip" type="object"
                                                    context="{'form_xml_id': 'yjzy_extend.view_transport_bill_date_customer_finish'}"
                                                    string="附件"/>
                                        </div>
                                        <field name="date_customer_finish_state" string="客户交单审批"
                                               attrs="{'readonly':1}"/>
                                        <field name="purchase_invoice_ids2" widget="many2many_tags" string="供应商交单日"
                                               attrs="{'readonly':1}"/>
                                        <button colspan="2" name="open_purchase_invoice_1" type="object"
                                                class="oe_stat_button" icon="fa-paperclip"
                                                string="供应商交单"/>
                                        <field name="date_purchase_finish_state" string="供应商交单审批"
                                               attrs="{'readonly':1}"/>
                                    </group>
                                </group>
                            </page>
                            <page string="统计" groups="base.group_system">
                                <group col="3">
                                    <group name="sale_currency">
                                        <field name="is_done_plan"/>
                                        <field name="is_done_tuopan"/>
                                        <field name="is_done_all_document"/>
                                        <field name="is_done_tb_vendor"/>
                                        <field name="stage1state" invisible="1" groups="base.group_system"
                                               attrs="{'readonly': [('locked','=',True)]}"/>
                                        <field name="stage2state" invisible="1" groups="base.group_system"
                                               attrs="{'readonly': [('locked','=',True)]}"/>
                                        <field name="sale_collect_state"/>
                                        <field name="purchase_collect_state"/>
                                        <field name="qingguan_state"/>
                                        <field name="is_fee_done"/>
                                        <field name="invoice_state"/>
                                    </group>
                                    <group name="self_currency">

                                        <field name="company_id" readonly="1" invisible="1"/>
                                        <field name="company_currency_id" readonly="1" invisible="1"/>


                                        <field name="org_sale_amount"/>
                                        <field name="org_real_sale_amount"/>

                                        <field name="sale_commission_ratio"
                                        />
                                        <field name="ciq_amount"/>
                                        <field name="no_ciq_amount"/>

                                        <field name="shoukuan_amount"/>
                                        <field name="fukuan_amount"/>

                                        <field name="budget_amount" invisible="1"/>
                                        <field name="budget_reset_amount" invisible="1"/>
                                    </group>
                                    <group groups="base.group_system">
                                        <field name="sale_currency_id" invisible="1"/>
                                        <field name="third_currency_id" no_create="True"/>
                                        <field name="sale_amount"/>
                                        <field name="real_sale_amount"/>
                                        <field name="sale_commission_amount"/>
                                        <field name="purchase_cost"/>
                                        <field name="fandian_amount"/>
                                        <field name="stock_cost"/>
                                        <field name="other_cost"/>
                                        <field name="back_tax_amount"/>
                                        <field name="vat_diff_amount"/>
                                        <field name="profit_amount"/>
                                        <field name="profit_ratio"/>
                                    </group>
                                </group>
                            </page>
                            <page groups="base.group_system">
                                <field name="operation_wizard" invisible="0"/>

                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>


        <!--采购-->
        <record id="view_transport_bill_tenyale_purchase_tree" model="ir.ui.view">
            <field name="name">transport.bill.tree</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <tree string="出运单" create="false">
                    <field name="name"/>

                    <field name="ref"/>

                    <field name="gongsi_id" string="销售主体"/>
                    <field name="purchase_gongsi_id" string="采购主体"/>
                </tree>
            </field>
        </record>


        <!--采购-->
        <record id="view_transport_bill_tenyale_purchase_form" model="ir.ui.view">
            <field name="name">transport.bill.tenyale.form</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <form string="出运单">
                    <header groups="sales_team.group_sale_assistant,transport.bills_all">
                        <button string="生成供应商发货单" type="object" name="make_tb_vendor"
                                attrs="{'invisible': [('is_done_tb_vendor','=',True)]}" class="oe_highlight"/>
                        <button string="打印供应商发货单" type="object" name="action_transport_bill_vendor_report"
                                class="oe_highlight"/>
                        <field name="state" widget="statusbar" invisible="1"/>
                    </header>
                    <sheet>
                        <group col="3">
                            <group name="general_information">
                                <field name="id" invisible="1"/>
                                <field name="ref" readonly="1"/>
                                <field name="name" attrs="{'readonly': 1}" invisible="1" groups="base.group_system"/>
                                <field name="purchase_cost"/>


                            </group>
                            <group>
                                <field name="date" attrs="{'readonly': 1}"/>

                                <field name="locked" groups="base.group_system"/>
                            </group>
                            <group>
                                <field name="gongsi_id" string="销售主体" attrs="{'readonly': 1}"/>
                                <field name="purchase_gongsi_id" string="采购主体" attrs="{'readonly': 1}"/>
                                <field name="is_done_tb_vendor" groups="base.group_system"/>
                            </group>


                        </group>
                        <notebook>


                            <page string="供应商发货通知">
                                <field name="tb_vendor_ids"/>
                            </page>


                            <page groups="base.group_system" string="时间管理页面">
                                <group>
                                    <group>
                                        <field name="submit_date"/>
                                        <field name="submit_uid"/>
                                        <field name="sales_confirm_date"/>
                                        <field name="sales_confirm_uid"/>
                                        <field name="approve_date"/>
                                        <field name="approve_uid"/>
                                    </group>
                                    <group>
                                        <field name="date_out_in"/>
                                        <field name="date_out_in_state"/>
                                        <field name="date_ship"/>
                                        <field name="date_ship_state" string="出运船审批"/>
                                        <field name="date_customer_finish"/>
                                        <field name="date_customer_finish_state" string="客户交单审批"/>
                                        <field name="purchase_invoice_ids2" widget="many2many_tags"/>
                                        <field name="date_purchase_finish_state" string="供应商交单审批"/>
                                    </group>
                                </group>
                            </page>

                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>


        <!--单证视图-->
        <record id="view_transport_bill_tenyale_document_tree" model="ir.ui.view">
            <field name="name">transport.bill.tree</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <tree string="出运单" create="false">
                    <field name="name"/>
                    <field name="partner_id" required="1"/>
                    <field name="ref"/>

                    <field name="gongsi_id" string="销售主体"/>
                    <field name="purchase_gongsi_id" string="采购主体"/>
                </tree>
            </field>
        </record>


        <!--单证-->
        <record id="view_transport_bill_tenyale_document_form" model="ir.ui.view">
            <field name="name">transport.bill.tenyale.form</field>
            <field name="model">transport.bill</field>
            <field name="arch" type="xml">
                <form string="出运单">
                    <header groups="sales_team.group_sale_assistant,transport.bills_all">
                        <button string="生成供应商发货单" type="object" name="make_tb_vendor"
                                attrs="{'invisible': [('is_done_tb_vendor','=',True)]}" class="oe_highlight"/>
                        <button string="打印供应商发货单" type="object" name="action_transport_bill_vendor_report"
                                class="oe_highlight"/>
                        <field name="state" widget="statusbar" invisible="1"/>
                    </header>
                    <sheet>
                        <group col="3">
                            <group name="general_information">
                                <field name="id" invisible="1"/>
                                <field name="ref" readonly="1"/>
                                <field name="name" attrs="{'readonly': 1}" invisible="1" groups="base.group_system"/>

                                <field name="partner_id" required="1" attrs="{'readonly': 1}"
                                       domain="[('customer','=',True),('parent_id', '=', False)]" no_create="True"/>

                                <field name="partner_shipping_id" domain="[('parent_id','child_of', partner_id)]"
                                       attrs="{'readonly': 1}" no_create="True"/>


                            </group>
                            <group>
                                <field name="date" attrs="{'readonly': 1}"/>
                                <field name="payment_term_id" attrs="{'readonly': 1}"/>
                                <field name="partner_invoice_id" domain="[('parent_id','child_of', partner_id)]"
                                       invisible="1"
                                       attrs="{'readonly': 1}" groups="base.group_system"/>

                                <field name="locked" groups="base.group_system"/>
                            </group>
                            <group>
                                <field name="gongsi_id" string="销售主体" attrs="{'readonly': 1}"/>
                                <field name="purchase_gongsi_id" string="采购主体" attrs="{'readonly': 1}"/>
                                <field name="is_done_tb_vendor" groups="base.group_system"/>
                            </group>


                        </group>
                        <notebook>

                            <page string="交单时间" name="jdsj" invisible="1">
                                <!--button name="update_picking_date" string="更新调拨单时间" class="oe_highlight" type="object"/-->
                                <button name="update_supplier_invoice_date" string="更新发票相关日期" class="oe_highlight"
                                        type="object"/>
                                <group>
                                    <group>
                                        <field name="date_out_in"/>
                                        <field name="date_in"/>
                                        <field name="date_ship"/>

                                    </group>
                                    <group>
                                        <field name="date_customer_finish"/>
                                        <field name="date_supplier_finish"/>
                                    </group>
                                </group>
                            </page>

                            <page string="订舱信息" name="dcxx">
                                <group>
                                    <group>
                                        <field name="production_sale_unit" attrs="{'readonly': 1}"/>
                                        <field name="invoice_title" attrs="{'readonly': 1}"/>
                                        <field name="partner_mark_comb_ids" invisible="1"/>
                                        <field name="mark_comb_id" domain="[('id', 'in', partner_mark_comb_ids)]"
                                               attrs="{'readonly': 1}" string="唛头"/>
                                        <field name="notice_man" attrs="{'readonly': 1}"/>
                                        <field name="delivery_man" attrs="{'readonly': 1}"/>
                                        <field name="wharf_src_id" attrs="{'readonly': 1}"/>
                                        <field name="wharf_dest_id" attrs="{'readonly': 1}"/>
                                        <field name="forwarder_name" attrs="{'readonly': 1}"/>
                                        <field name="settlement" attrs="{'readonly': 1}"/>
                                        <field name="notice" attrs="{'readonly': 1}"/>
                                        <field name="demand_info" attrs="{'readonly': 1}"/>
                                    </group>
                                </group>
                            </page>
                            <page string="清关资料" name="qgzl">
                                <field name="qingguan_line_ids" attrs="{'readonly': 1}">
                                    <tree editable="bottom">
                                        <field name="company_currency_id" invisible="1"/>
                                        <field name="sale_currency_id" invisible="1"/>
                                        <field name="third_currency_id" invisible="1"/>
                                        <field name="so_id" string="销售合同"/>
                                        <field name="product_id"/>
                                        <field name="source_area"/>
                                        <field name="source_country_id"/>
                                        <field name="uom_id" groups="base.group_system"/>
                                        <field name="s_uom_id" string="单位"/>
                                        <field name="price"/>
                                        <field name="qty" sum="小计"/>
                                        <field name="qty_package" sum="小计" groups="base.group_system"/>
                                        <field name="package_qty" sum="小计" string="箱数"/>
                                        <field name="net_weight" sum="小计"/>
                                        <field name="gross_weight" sum="小计"/>
                                        <field name="tuopan_weight" sum="小计" string="托重"/>
                                        <field name="shiji_weight" sum="小计"/>
                                        <field name="volume" sum="小计" string="体积"/>
                                        <field name="tuopan_volume" sum="小计" string="托体积"/>
                                        <field name="shiji_volume" sum="小计"/>
                                        <field name="sub_total" sum="小计"/>
                                    </tree>

                                </field>
                                <group>
                                    <field name="qingguan_description" attrs="{'readonly': 1}"/>
                                </group>
                            </page>

                            <page string="供应商发货通知">
                                <field name="tb_vendor_ids"/>
                            </page>

                            <page string="报关资料">
                                <group col="4">
                                    <group>
                                        <field name="pallet_type" attrs="{'readonly':1}"/>
                                    </group>
                                    <group>
                                        <field name="pallet_qty" attrs="{'readonly':1}"/>
                                    </group>
                                    <group>
                                        <field name="tuopan_weight" attrs="{'readonly':1}"/>
                                    </group>
                                    <group>
                                        <field name="tuopan_volume" attrs="{'readonly':1}"/>
                                    </group>
                                </group>
                                <field name="hsname_ids" attrs="{'readonly':1}">
                                    <tree editable="bottom" decoration-danger="purchase_hs_id==False">
                                        <field name="purchase_hs_id" string="采购对应" invisible="1"/>
                                        <button name="make_suppliser_hs" type="object" icon="fa-th-large"/>
                                        <field name="id" invisible="1"/>
                                        <field name="package_tag" invisible="1"/>
                                        <field name="name" invisible="1"/>

                                        <field name="dump_product_id" groups="base.group_system" invisible="1"/>
                                        <field name="hs_id" attrs="{'required':[('purchase_hs_id','=',False)]}"/>
                                        <field name="hs_en_name" groups="base.group_system" invisible="1"/>

                                        <field name="po_id" string="采购合同"
                                               attrs="{'required':[('purchase_hs_id','=',False)]}"/>
                                        <field name="amount" sum="小计" string="销售额"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)]}"/>
                                        <field name="out_qty2" sum="小计" string="报关数量"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)]}"/>
                                        <field name="price2" string="单价" readonly="1"/>
                                        <field name="amount2" sum="小计" string="金额"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)]}"/>
                                        <field name="purchase_amount2" string="采购额"
                                               attrs="{'readonly':[('purchase_hs_id','=',False)]}"/>
                                        <field name="back_tax" readonly="1"/>
                                        <field name="purchase_back_tax_amount2" string="退税额" readonly="1"/>
                                        <field name="out_qty" sum="小计" invisible="1"/>
                                        <field name="price" string="单价" invisible="1"/>


                                        <field name="purchase_amount" invisible="1"/>
                                        <field name="hs_id2" invisible="1"/>
                                        <field name="dump_product_id2" groups="base.group_system" invisible="1"/>
                                        <field name="source_area"/>
                                        <field name="source_country_id"/>
                                        <field name="qty_max" sum="小计" string="件数"/>
                                        <field name="qty_mid" groups="base.group_system" invisible="1"/>
                                        <field name="qty_min" groups="base.group_system" invisible="1"/>
                                        <field name="net_weight" sum="小计"/>
                                        <field name="gross_weight" sum="小计"/>
                                        <field name="tuopan_weight" string="托重"/>
                                        <field name="shiji_weight" sum="小计"/>
                                        <field name="volume" string="体积"/>
                                        <field name="tuopan_volume" string="托体积"/>
                                        <field name="shiji_volume"/>
                                        <field name="keyword" invisible="1"/>
                                        <field name="type" invisible="1"/>
                                        <field name="note" invisible="1"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="package_tag"/>
                                                <field name="name" readonly="0"/>
                                                <field name="dump_product_id" readonly="0"/>
                                                <field name="hs_id" readonly="0"/>
                                                <field name="hs_en_name" readonly="0"/>
                                                <field name="po_id"/>
                                                <field name="back_tax" readonly="1"/>
                                                <field name="out_qty" readonly="0"/>
                                                <field name="price"/>
                                                <field name="purchase_amount"/>
                                                <field name="purchase_amount2"/>
                                                <field name="amount"/>
                                                <field name="hs_id2"/>
                                                <field name="dump_product_id2"/>
                                                <field name="out_qty2"/>
                                                <field name="price2"/>
                                                <field name="amount2"/>
                                            </group>
                                            <group>
                                                <field name="source_area"/>
                                                <field name="source_country_id"/>
                                                <field name="qty_max"/>
                                                <field name="qty_mid" invisible="1"/>
                                                <field name="qty_min" readonly="1"/>
                                                <field name="net_weight"/>
                                                <field name="gross_weight"/>
                                                <field name="tuopan_weight"/>
                                                <field name="shiji_weight"/>
                                                <field name="volume"/>
                                                <field name="tuopan_volume"/>
                                                <field name="shiji_volume"/>
                                                <field name="type"/>
                                                <field name="note"/>
                                            </group>
                                        </group>
                                        <group>
                                            <field name="keyword"/>
                                        </group>
                                    </form>


                                </field>
                            </page>


                            <page string="采购报关统计" invisible="1">
                                <field name="btls_hs_ids" attrs="{'readonly': 1}">
                                    <tree editable="bottom">
                                        <field name="sale_hs_id" domain="[('tb_id','=', parent.id)]" string="销售统计"/>
                                        <field name="sale_hs_db_id"/>
                                        <field name="supplier_id"/>
                                        <field name="name"/>
                                        <field name="po_id"/>
                                        <field name="po_code" groups="base.group_system"/>
                                        <field name="hs_id"/>
                                        <field name="product_id" groups="base.group_system"/>
                                        <field name="qty" groups="base.group_system"/>
                                        <field name="price" groups="base.group_system"/>
                                        <field name="amount" groups="base.group_system"/>
                                        <field name="back_tax" groups="base.group_system"/>
                                        <field name="back_tax_amount" groups="base.group_system"/>
                                        <field name="hs_id2"/>
                                        <field name="product_id2" groups="base.group_system"/>
                                        <field name="qty2" groups="base.group_system"/>
                                        <field name="price2" groups="base.group_system"/>
                                        <field name="amount2"/>
                                        <field name="back_tax2"/>
                                        <field name="back_tax_amount2"/>
                                        <field name="tongji_type"/>
                                    </tree>
                                </field>
                            </page>
                            <page groups="base.group_system" string="审批页面">
                                <group>
                                    <group>
                                        <field name="submit_date"/>
                                        <field name="submit_uid"/>
                                        <field name="sales_confirm_date"/>
                                        <field name="sales_confirm_uid"/>
                                        <field name="approve_date"/>
                                        <field name="approve_uid"/>
                                    </group>
                                    <group>
                                        <field name="confirmed_date"/>
                                        <field name="confirmed_uid"/>
                                        <field name="delivered_date"/>
                                        <field name="delivered_uid"/>
                                        <field name="invoiced_date"/>
                                        <field name="invoiced_uid"/>
                                    </group>
                                </group>
                            </page>

                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>


        <record model="ir.actions.act_window" id="act_open_transport_bill_tenyale_create_view">
            <field name="name">创建新出运单</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">transport.bill</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="domain">[]</field>
            <field name="context">
                {'default_outer_currency_id':3,'default_export_insurance_currency_id':3,'default_other_currency_id':3,'show_po_code':
                1}
            </field>
            <field name="view_ids" eval="[(5, 0, 0),

                          (0, 0, {'view_mode': 'form', 'view_id': ref('view_transport_bill_tenyale_sales_form')})]"/>

        </record>

        <menuitem id="menu_transport_tenyale_create_bill" name="创建新出运单"
                  parent="yjzy_extend.menu_transport_tenyale_bill_root"
                  sequence="99"
                  action="act_open_transport_bill_tenyale_create_view"
        />
        <record model="ir.actions.act_window" id="action_transport_bill_tenyale_approving">
            <field name="name">未生效出运合同</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">transport.bill</field>
            <field name="view_type">form</field>
            <field name="limit">20</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="search_view_id" ref="view_transport_bill_tenyale_filter"/>
            <field name="domain">
                [('state','in',['cancel','draft','refused','submit','sales_approve','manager_approve'])]
            </field>
            <field name="context">
                {'search_default_group_by_stage':1,'only_name':1,'default_outer_currency_id':3,'default_export_insurance_currency_id':3,'default_other_currency_id':3,'show_po_code':
                1}
            </field>
            <field name="view_ids" eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('view_transport_bill_tenyale_approving_tree')}),
                          (0, 0, {'view_mode': 'kanban', 'view_id': ref('view_transport_bill_tenyale_sales_kanban')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('view_transport_bill_tenyale_sales_form')})]"/>

        </record>

        <menuitem id="menu_transport_tenyale_approving" name="未生效"
                  parent="yjzy_extend.menu_transport_tenyale_bill_root"
                  sequence="1"
                  action="action_transport_bill_tenyale_approving"
        />

        <record model="ir.actions.act_window" id="action_transport_bill_tenyale_approve">
            <field name="name">执行中出运合同</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">transport.bill</field>
            <field name="view_type">form</field>
            <field name="limit">20</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="search_view_id" ref="view_transport_bill_tenyale_filter"/>
            <field name="domain">[('state','in',['locked','finish_add_purchase','approve','delivered','invoiced','verifying'])]</field>
            <field name="context">
                {'search_default_group_by_state_type':1,'only_name':1,'default_outer_currency_id':3,'default_export_insurance_currency_id':3,'default_other_currency_id':3,'show_po_code':
                1}
            </field>
            <field name="view_ids" eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('view_transport_bill_tenyale_sales_tree')}),
                          (0, 0, {'view_mode': 'kanban', 'view_id': ref('view_transport_bill_tenyale_sales_kanban')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('view_transport_bill_tenyale_sales_form')})]"/>

        </record>

        <menuitem id="menu_transport_tenyale_approve" name="执行中"
                  parent="yjzy_extend.menu_transport_tenyale_bill_root"
                  sequence="2"
                  action="action_transport_bill_tenyale_approve"
        />

        <!--record model="ir.actions.act_window" id="act_open_transport_bill_tenyale_sales_view">
            <field name="name">业务待处理</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">transport.bill</field>
            <field name="view_type">form</field>
            <field name="limit">20</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="domain">[('state','in',['cancel','draft','submit'])]</field>
            <field name="context">{'default_outer_currency_id':3,'default_export_insurance_currency_id':3,'default_other_currency_id':3}</field>
            <field name="view_ids" eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('view_transport_bill_tenyale_sales_tree')}),
                          (0, 0, {'view_mode': 'kanban', 'view_id': ref('view_transport_bill_tenyale_sales_kanban')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('view_transport_bill_tenyale_sales_form')})]"/>

        </record>

        <menuitem id="menu_transport_tenyale_sales_bill" name="业务待处理"
                  parent="yjzy_extend.menu_transport_tenyale_bill_root"
                  sequence="1"
                  action="act_open_transport_bill_tenyale_sales_view"
                  /-->
        <!--伟伟-->
        <!--record model="ir.actions.act_window" id="act_open_transport_bill_tenyale_weiwei_view">
            <field name="name">业务待处理</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">transport.bill</field>
            <field name="view_type">form</field>
            <field name="limit">20</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="domain">[('state','in',['cancel','draft','submit','sales_approve']),'|','|',('partner_id.x_studio_field_U7OvH','in',uid),('partner_id.user_id','=',uid),('partner_id.assistant_id','=',uid)]</field>
            <field name="context">{'default_outer_currency_id':3,'default_export_insurance_currency_id':3,'default_other_currency_id':3}</field>
            <field name="view_ids" eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('view_transport_bill_tenyale_sales_tree')}),
                          (0, 0, {'view_mode': 'kanban', 'view_id': ref('view_transport_bill_tenyale_sales_kanban')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('view_transport_bill_tenyale_sales_form')})]"/>

        </record>

        <menuitem id="menu_transport_tenyale_weiwei_bill" name="业务待处理"
                  parent="yjzy_extend.menu_transport_tenyale_bill_root"
                  sequence="1"
                  action="act_open_transport_bill_tenyale_weiwei_view"
                  /-->


        <!--record model="ir.actions.act_window" id="act_open_transport_bill_tenyale_hegui_view">
                  <field name="name">合规待处理</field>
                  <field name="type">ir.actions.act_window</field>
                  <field name="res_model">transport.bill</field>
                  <field name="view_type">form</field>
                  <field name="limit">20</field>
                  <field name="view_mode">tree,form,kanban</field>
                  <field name="domain">[('state','in',['approve','confirmed','delivered','invoiced'])]</field>
                  <field name="context">{'default_outer_currency_id':3,'default_export_insurance_currency_id':3,'default_other_currency_id':3}</field>
                  <field name="view_ids" eval="[(5, 0, 0),
                                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_transport_bill_tenyale_sales_tree')}),
                                (0, 0, {'view_mode': 'kanban', 'view_id': ref('view_transport_bill_tenyale_sales_kanban')}),
                                (0, 0, {'view_mode': 'form', 'view_id': ref('view_transport_bill_tenyale_sales_form')})]"/>

              </record>

              <menuitem id="menu_transport_tenyale_hegui_bill" name="合规待处理"
                        parent="yjzy_extend.menu_transport_tenyale_bill_root"
                        sequence="2"
                        action="act_open_transport_bill_tenyale_hegui_view"
                       /-->


        <!--record model="ir.actions.act_window" id="act_open_transport_bill_tenyale_document_view">
            <field name="name">单证待处理</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">transport.bill</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="domain">[('state','=','approve')]</field>
            <field name="limit">20</field>
            <field name="context">
                {'default_outer_currency_id':3,'default_export_insurance_currency_id':3,'default_other_currency_id':3,'show_po_code':
                1}
            </field>
            <field name="view_ids" eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('view_transport_bill_tenyale_document_tree')}),
                          (0, 0, {'view_mode': 'kanban', 'view_id': ref('view_transport_bill_tenyale_sales_kanban')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('view_transport_bill_tenyale_document_form')})]"/>

        </record>

        <menuitem id="menu_transport_tenyale_document_bill" name="单证待处理"
                  parent="yjzy_extend.menu_transport_tenyale_bill_root"
                  sequence="3" groups="base.group_system"
                  action="act_open_transport_bill_tenyale_document_view"
        /-->

        <!--record model="ir.actions.act_window" id="act_open_transport_bill_tenyale_purchase_view">
            <field name="name">采购查询出运单</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">transport.bill</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="domain">[]</field>
            <field name="limit">20</field>
            <field name="context">{'default_outer_currency_id':3,'default_export_insurance_currency_id':3,'default_other_currency_id':3}</field>
            <field name="view_ids" eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('view_transport_bill_tenyale_purchase_tree')}),
                          (0, 0, {'view_mode': 'kanban', 'view_id': ref('view_transport_bill_tenyale_sales_kanban')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('view_transport_bill_tenyale_purchase_form')})]"/>

        </record>

        <menuitem id="menu_transport_tenyale_purchase_bill" name="采购查询出运单"
                  parent="yjzy_extend.menu_transport_tenyale_bill_root"
                  sequence="3"
                  action="act_open_transport_bill_tenyale_purchase_view"
                  /-->


        <record model="ir.actions.act_window" id="act_open_transport_bill_tenyale_all_view">
            <field name="name">新出运单所有</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">transport.bill</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="domain">[]</field>
            <field name="limit">20</field>
            <field name="search_view_id" ref="view_transport_bill_tenyale_filter"/>
            <field name="context">
                {'search_default_group_by_stage':1,'only_name':1,'default_outer_currency_id':3,'default_export_insurance_currency_id':3,'default_other_currency_id':3,'show_po_code':1}
            </field>
            <field name="view_ids" eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('view_transport_bill_tenyale_sales_tree')}),
                          (0, 0, {'view_mode': 'kanban', 'view_id': ref('view_transport_bill_tenyale_sales_kanban')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('view_transport_bill_tenyale_sales_form')})]"/>

        </record>

        <menuitem id="menu_transport_tenyale_all_bill" name="新出运单所有"
                  parent="yjzy_extend.menu_transport_tenyale_bill_root"
                  sequence="99"
                  action="act_open_transport_bill_tenyale_all_view"
        />
        <record model="ir.actions.act_window" id="act_open_transport_bill_tenyale_done_view">
            <field name="name">已核销出运列表</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">transport.bill</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="domain">[('state','=','done')]</field>
            <field name="limit">20</field>
            <field name="search_view_id" ref="view_transport_bill_tenyale_filter"/>
            <field name="context">
                {'search_default_group_by_date_hexiao':1,'only_name':1,'default_outer_currency_id':3,'default_export_insurance_currency_id':3,'default_other_currency_id':3,'show_po_code':1}
            </field>
            <field name="view_ids" eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('view_transport_bill_tenyale_hexiao_tree')}),
                          (0, 0, {'view_mode': 'kanban', 'view_id': ref('view_transport_bill_tenyale_sales_kanban')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('view_transport_bill_tenyale_sales_form')})]"/>

        </record>

        <menuitem id="menu_transport_tenyale_done_bill" name="已核销出运列表"
                  parent="yjzy_extend.menu_transport_tenyale_bill_root"
                  sequence="90"
                  action="act_open_transport_bill_tenyale_done_view"
        />
        <record model="ir.actions.act_window" id="act_open_transport_bill_tenyale_years_view">
            <field name="name">年度出运查询</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">transport.bill</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="domain">[('state','in',['locked','delivered','invoiced','verifying','done'])]</field>
            <field name="limit">20</field>
            <field name="search_view_id" ref="view_transport_bill_tenyale_filter"/>
            <field name="context">
                {'search_default_group_date_out_in':1,'only_name':1,'default_outer_currency_id':3,'default_export_insurance_currency_id':3,'default_other_currency_id':3,'show_po_code':1}
            </field>
            <field name="view_ids" eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('view_transport_bill_tenyale_years_tree_new_721')}),
                          (0, 0, {'view_mode': 'kanban', 'view_id': ref('view_transport_bill_tenyale_sales_kanban')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('view_transport_bill_tenyale_sales_form')})]"/>

        </record>

        <menuitem id="menu_transport_tenyale_years_bill" name="年度出运查询"
                  parent="yjzy_extend.menu_transport_tenyale_bill_root"
                  sequence="97"
                  action="act_open_transport_bill_tenyale_years_view"
        />


    </data>
</odoo>